<!DOCTYPE html>
<html lang="en" class="dark-mode">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Strategy Hub | SustainaTrend™</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <!-- Chart.js for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Custom CSS -->
    <style>
        :root {
            --primary-color: #3b82f6;
            --secondary-color: #10b981;
            --dark-bg: #1f2937;
            --light-bg: #f9fafb;
            --dark-text: #1f2937;
            --light-text: #f9fafb;
            --card-bg-dark: #374151;
            --card-bg-light: #ffffff;
            --border-dark: #4b5563;
            --border-light: #e5e7eb;
        }
        
        /* Light Mode */
        .light-mode {
            --bg-color: var(--light-bg);
            --text-color: var(--dark-text);
            --card-bg: var(--card-bg-light);
            --border-color: var(--border-light);
        }
        
        /* Dark Mode */
        .dark-mode {
            --bg-color: var(--dark-bg);
            --text-color: var(--light-text);
            --card-bg: var(--card-bg-dark);
            --border-color: var(--border-dark);
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
        }
        
        .navbar {
            background-color: var(--card-bg);
            border-bottom: 1px solid var(--border-color);
        }
        
        .navbar-brand {
            font-weight: bold;
            color: var(--primary-color) !important;
        }
        
        .nav-link {
            color: var(--text-color) !important;
        }
        
        .nav-link.active {
            color: var(--primary-color) !important;
            font-weight: bold;
        }
        
        .card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-secondary {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }
        
        /* Data metrics styles */
        .metric-card {
            padding: 1.5rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .metric-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        .metric-title {
            font-size: 1rem;
            color: #6b7280;
        }
        
        /* Trend indicators */
        .trend-up {
            color: #10b981;
        }
        
        .trend-down {
            color: #ef4444;
        }
        
        .trend-stable {
            color: #f59e0b;
        }
        
        /* Theme toggle */
        .theme-toggle {
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 0.25rem;
        }
        
        /* Footer */
        footer {
            background-color: var(--card-bg);
            border-top: 1px solid var(--border-color);
            padding: 1rem 0;
            margin-top: 2rem;
        }
        
        /* API status indicator */
        .api-status {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 5px;
        }
        
        .api-online {
            background-color: #10b981;
        }
        
        .api-offline {
            background-color: #ef4444;
        }
        
        .api-degraded {
            background-color: #f59e0b;
        }

        /* Sidebar styles */
        #sidebar {
            min-width: 250px;
            max-width: 250px;
            background-color: var(--card-bg);
            color: var(--text-color);
            transition: all 0.3s;
            border-right: 1px solid var(--border-color);
            height: 100vh;
            position: fixed;
            z-index: 100;
        }

        #sidebar .sidebar-header {
            padding: 20px;
            background-color: var(--card-bg);
            border-bottom: 1px solid var(--border-color);
        }

        #sidebar ul.components {
            padding: 20px 0;
            border-bottom: 1px solid var(--border-color);
        }

        #sidebar ul li a {
            padding: 10px 20px;
            font-size: 1.1em;
            display: block;
            color: var(--text-color);
            text-decoration: none;
            transition: all 0.3s;
        }

        #sidebar ul li a:hover {
            background-color: var(--primary-color);
            color: white;
        }

        #sidebar ul li.active > a {
            color: var(--primary-color);
            background-color: transparent;
            font-weight: bold;
        }

        #content {
            margin-left: 250px;
            padding: 20px;
            min-height: 100vh;
            transition: all 0.3s;
        }

        /* Media queries for responsive sidebar */
        @media (max-width: 768px) {
            #sidebar {
                margin-left: -250px;
            }
            #sidebar.active {
                margin-left: 0;
            }
            #content {
                margin-left: 0;
            }
            #content.active {
                margin-left: 250px;
            }
        }

        /* Custom scrollbar for sidebar */
        #sidebar::-webkit-scrollbar {
            width: 8px;
        }

        #sidebar::-webkit-scrollbar-track {
            background: var(--card-bg);
        }

        #sidebar::-webkit-scrollbar-thumb {
            background-color: var(--border-color);
            border-radius: 10px;
        }
    </style>
    
    
</head>
<body>
    <div class="wrapper d-flex">
        <!-- Sidebar -->
        <nav id="sidebar">
            <div class="sidebar-header">
                <h3>SustainaTrend™</h3>
                <p class="text-muted">Intelligence Platform</p>
            </div>

            <ul class="list-unstyled components">
                <li class="">
                    <a href="/"><i class="fas fa-home me-2"></i> Home</a>
                </li>
                <li class="">
                    <a href="/dashboard"><i class="fas fa-chart-line me-2"></i> Dashboard</a>
                </li>
                <li class="">
                    <a href="/document-upload"><i class="fas fa-file-upload me-2"></i> Document Upload</a>
                </li>
                <li class="">
                    <a href="/search"><i class="fas fa-search me-2"></i> Search</a>
                </li>
                <li class="">
                    <a href="/trend-analysis"><i class="fas fa-chart-pie me-2"></i> Trend Analysis</a>
                </li>
                <li class="">
                    <a href="/risk-tracker"><i class="fas fa-exclamation-triangle me-2"></i> Risk Tracker</a>
                </li>
                <li class="">
                    <a href="/sustainability"><i class="fas fa-leaf me-2"></i> Sustainability</a>
                </li>
                <li class="">
                    <a href="/monetization"><i class="fas fa-dollar-sign me-2"></i> Monetization</a>
                </li>
                <li class="active">
                    <a href="/unified-strategy-hub"><i class="fas fa-lightbulb me-2"></i> Strategy Hub</a>
                </li>
            </ul>

            <div class="px-3 py-2">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="themeSwitch" 
                        >
                    <label class="form-check-label" for="themeSwitch">Dark Mode</label>
                </div>
                <div class="mt-3">
                    <small class="text-muted">API Status: 
                        <span class="api-status api-offline"></span>
                        
                    </small>
                </div>
            </div>
        </nav>

        <!-- Page Content -->
        <div id="content">
            <nav class="navbar navbar-expand-lg">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-primary">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="ms-3">
                        <h3>Enhanced Strategy Hub | SustainaTrend™</h3>
                    </div>
                    <div class="ms-auto">
                        <a href="/document-upload" class="btn btn-outline-primary">
                            <i class="fas fa-file-upload me-2"></i> Upload Report
                        </a>
                    </div>
                </div>
            </nav>

            <main>
                
<div class="strategy-hub-container">
  <!-- Header Section -->
  <div class="strategy-header">
    <div>
      <h1 class="strategy-title">Strategy Hub</h1>
      <p class="strategy-subtitle">AI-powered insights for sustainability strategy and intelligence</p>
    </div>
  </div>

  <!-- Navigation Tabs - Simplified for Finchat.io Style -->
  <div class="hub-tabs">
    <div class="hub-tab active" data-tab="strategy-modeler">Strategy Modeler</div>
    <div class="hub-tab" data-tab="monetization">Monetization</div>
    <div class="hub-tab" data-tab="virality-trends">Virality Trends</div>
    <div class="hub-tab" data-tab="data-analysis">Data Analysis</div>
  </div>

  <!-- Strategy Modeler Tab -->
  <div class="tab-content active" id="strategy-modeler">
    <div class="card-grid-2">
      <!-- PDF Uploader -->
      <div class="hub-card">
        <div class="hub-card-title">
          <i class="fas fa-file-pdf"></i> Document Analysis
        </div>
        <p>Upload a PDF document to analyze sustainability reporting, extract insights, and identify improvement opportunities.</p>
        
        <div class="pdf-dropzone" id="pdf-dropzone">
          <div class="pdf-icon">
            <i class="fas fa-file-upload"></i>
          </div>
          <p>Drag & drop a document or click to browse</p>
          <small>Supported formats: PDF, DOCX, XLSX, CSV</small>
          
          <div class="analysis-options">
            <div class="analysis-option">
              <input type="checkbox" id="extract-entities" checked>
              <label for="extract-entities">Extract Entities</label>
            </div>
            <div class="analysis-option">
              <input type="checkbox" id="benchmark" checked>
              <label for="benchmark">Industry Benchmark</label>
            </div>
            <div class="analysis-option">
              <input type="checkbox" id="regulatory-check" checked>
              <label for="regulatory-check">Regulatory Check</label>
            </div>
          </div>
        </div>
        
        <input type="file" id="pdf-upload" style="display: none;" accept=".pdf,.docx,.doc,.xlsx,.xls,.csv">
        
        <div style="margin-top: 1rem; text-align: center;">
          <button class="action-btn" id="upload-btn">Upload Document</button>
        </div>
      </div>
      
      <!-- Recent Documents -->
      <div class="hub-card">
        <div class="hub-card-title">
          <i class="fas fa-folder-open"></i> Recent Documents
        </div>
        <p>Access your recently analyzed documents and reports.</p>
        
        <div class="document-list">
          
            
              <div class="document-card" data-id="sustainability_report_2024.pdf">
                <div class="document-icon">
                  
                    <i class="fas fa-file-pdf"></i>
                  
                </div>
                <div class="document-info">
                  <div class="document-title">Sustainability Report 2024<span class="document-category">ESG Report</span></div>
                  <div class="document-meta">March 1, 2024 • 42 pages</div>
                </div>
                <div>
                  <i class="fas fa-chevron-right"></i>
                </div>
              </div>
            
              <div class="document-card" data-id="csrd_assessment.pdf">
                <div class="document-icon">
                  
                    <i class="fas fa-file-pdf"></i>
                  
                </div>
                <div class="document-info">
                  <div class="document-title">CSRD Compliance Assessment<span class="document-category">Regulatory</span></div>
                  <div class="document-meta">February 15, 2024 • 18 pages</div>
                </div>
                <div>
                  <i class="fas fa-chevron-right"></i>
                </div>
              </div>
            
              <div class="document-card" data-id="emissions_data_2023.xlsx">
                <div class="document-icon">
                  
                    <i class="fas fa-file-excel"></i>
                  
                </div>
                <div class="document-info">
                  <div class="document-title">GHG Emissions Data 2023<span class="document-category">Data</span></div>
                  <div class="document-meta">January 20, 2024 • 3 pages</div>
                </div>
                <div>
                  <i class="fas fa-chevron-right"></i>
                </div>
              </div>
            
          
        </div>
      </div>
    </div>
  </div>

  <!-- Monetization Tab -->
  <div class="tab-content" id="monetization">
    <div class="card-grid-2">
      <!-- Monetization Strategies Overview -->
      <div class="hub-card">
        <div class="hub-card-title">
          <i class="fas fa-hand-holding-usd"></i> Monetization Strategies
        </div>
        <p>Explore various monetization strategies for sustainability intelligence to create new value streams.</p>
        
        <div class="monetization-categories">
          
            
              <div class="monetization-category">
                <div class="monetization-header">
                  <div class="strategy-icon">
                    <i class="fas fa-chart-line"></i>
                  </div>
                  <div class="strategy-header-text">
                    <div class="strategy-name">AI-Driven Sustainability Trend Monetization</div>
                    <div class="strategy-desc">Monetization strategies based on AI-powered trend detection and analysis</div>
                  </div>
                </div>
                <div class="strategy-metrics">
                  <div class="strategy-metrics-title">Key Metrics:</div>
                  <div class="strategy-metrics-list">
                    
                  </div>
                </div>
                <div style="margin-top: 0.5rem; text-align: right;">
                  <button class="small-action-btn analyze-strategy" data-strategy-id="M1">Analyze Opportunity</button>
                </div>
              </div>
            
              <div class="monetization-category">
                <div class="monetization-header">
                  <div class="strategy-icon">
                    <i class="fas fa-chart-line"></i>
                  </div>
                  <div class="strategy-header-text">
                    <div class="strategy-name">Consulting Services Model</div>
                    <div class="strategy-desc">Advisory and implementation services for sustainability reporting and improvements</div>
                  </div>
                </div>
                <div class="strategy-metrics">
                  <div class="strategy-metrics-title">Key Metrics:</div>
                  <div class="strategy-metrics-list">
                    
                  </div>
                </div>
                <div style="margin-top: 0.5rem; text-align: right;">
                  <button class="small-action-btn analyze-strategy" data-strategy-id="M2">Analyze Opportunity</button>
                </div>
              </div>
            
              <div class="monetization-category">
                <div class="monetization-header">
                  <div class="strategy-icon">
                    <i class="fas fa-chart-line"></i>
                  </div>
                  <div class="strategy-header-text">
                    <div class="strategy-name">SaaS Subscription Platform</div>
                    <div class="strategy-desc">Cloud-based sustainability intelligence platform with tiered subscription options</div>
                  </div>
                </div>
                <div class="strategy-metrics">
                  <div class="strategy-metrics-title">Key Metrics:</div>
                  <div class="strategy-metrics-list">
                    
                  </div>
                </div>
                <div style="margin-top: 0.5rem; text-align: right;">
                  <button class="small-action-btn analyze-strategy" data-strategy-id="M3">Analyze Opportunity</button>
                </div>
              </div>
            
              <div class="monetization-category">
                <div class="monetization-header">
                  <div class="strategy-icon">
                    <i class="fas fa-chart-line"></i>
                  </div>
                  <div class="strategy-header-text">
                    <div class="strategy-name">Sustainability Data Marketplace</div>
                    <div class="strategy-desc">Platform for buying and selling anonymized sustainability datasets and metrics</div>
                  </div>
                </div>
                <div class="strategy-metrics">
                  <div class="strategy-metrics-title">Key Metrics:</div>
                  <div class="strategy-metrics-list">
                    
                  </div>
                </div>
                <div style="margin-top: 0.5rem; text-align: right;">
                  <button class="small-action-btn analyze-strategy" data-strategy-id="M4">Analyze Opportunity</button>
                </div>
              </div>
            
              <div class="monetization-category">
                <div class="monetization-header">
                  <div class="strategy-icon">
                    <i class="fas fa-chart-line"></i>
                  </div>
                  <div class="strategy-header-text">
                    <div class="strategy-name">Certification and Verification</div>
                    <div class="strategy-desc">Revenue from verifying sustainability claims and certifying compliance</div>
                  </div>
                </div>
                <div class="strategy-metrics">
                  <div class="strategy-metrics-title">Key Metrics:</div>
                  <div class="strategy-metrics-list">
                    
                  </div>
                </div>
                <div style="margin-top: 0.5rem; text-align: right;">
                  <button class="small-action-btn analyze-strategy" data-strategy-id="M5">Analyze Opportunity</button>
                </div>
              </div>
            
              <div class="monetization-category">
                <div class="monetization-header">
                  <div class="strategy-icon">
                    <i class="fas fa-chart-line"></i>
                  </div>
                  <div class="strategy-header-text">
                    <div class="strategy-name">AI-Generated Reporting as a Service</div>
                    <div class="strategy-desc">Automated generation of sustainability reports and regulatory filings</div>
                  </div>
                </div>
                <div class="strategy-metrics">
                  <div class="strategy-metrics-title">Key Metrics:</div>
                  <div class="strategy-metrics-list">
                    
                  </div>
                </div>
                <div style="margin-top: 0.5rem; text-align: right;">
                  <button class="small-action-btn analyze-strategy" data-strategy-id="M6">Analyze Opportunity</button>
                </div>
              </div>
            
          
        </div>
      </div>
      
      <!-- Strategic Plan Generator -->
      <div class="hub-card">
        <div class="hub-card-title">
          <i class="fas fa-project-diagram"></i> Strategic Plan Generator
        </div>
        <p>Generate a comprehensive strategic plan for monetizing sustainability intelligence.</p>
        
        <div class="strategic-plan-form">
          <div class="form-group">
            <label for="company-name">Company Name</label>
            <input type="text" id="company-name" placeholder="Your company name">
          </div>
          
          <div class="form-group">
            <label for="industry">Industry</label>
            <select id="industry">
              <option value="technology">Technology</option>
              <option value="energy">Energy & Utilities</option>
              <option value="manufacturing">Manufacturing</option>
              <option value="financial">Financial Services</option>
              <option value="retail">Retail & Consumer Goods</option>
              <option value="healthcare">Healthcare & Life Sciences</option>
              <option value="transportation">Transportation & Logistics</option>
              <option value="construction">Construction & Real Estate</option>
              <option value="agriculture">Agriculture & Food</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="business-objectives">Business Objectives</label>
            <div class="checkbox-list">
              <div class="checkbox-item">
                <input type="checkbox" id="objective-revenue" checked>
                <label for="objective-revenue">Revenue Growth</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="objective-differentiation" checked>
                <label for="objective-differentiation">Market Differentiation</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="objective-innovation">
                <label for="objective-innovation">Product Innovation</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="objective-compliance">
                <label for="objective-compliance">Regulatory Compliance</label>
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <label for="sustainability-focus">Sustainability Focus Areas</label>
            <div class="checkbox-list">
              <div class="checkbox-item">
                <input type="checkbox" id="focus-climate" checked>
                <label for="focus-climate">Climate Action</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="focus-circular">
                <label for="focus-circular">Circular Economy</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="focus-social">
                <label for="focus-social">Social Impact</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="focus-biodiversity">
                <label for="focus-biodiversity">Biodiversity</label>
              </div>
            </div>
          </div>
          
          <div style="margin-top: 1rem; text-align: center;">
            <button class="action-btn" id="generate-plan-btn">Generate Strategic Plan</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Strategic Plan Results Section -->
    <div class="hub-card" id="strategic-plan-results" style="display: none; margin-top: 1.5rem;">
      <div class="hub-card-title">
        <i class="fas fa-lightbulb"></i> <span id="plan-title">Strategic Plan</span>
      </div>
      
      <div class="strategic-plan-header">
        <div class="plan-company"></div>
        <div class="plan-industry"></div>
      </div>
      
      <div class="strategic-plan-content">
        <!-- Content will be dynamically populated by JavaScript -->
        <div id="plan-content"></div>
      </div>
      
      <div style="margin-top: 1rem; text-align: center;">
        <button class="secondary-action-btn" id="export-plan-btn">Export Plan</button>
      </div>
    </div>
  </div>

  <!-- Virality Trends Tab -->
  <div class="tab-content" id="virality-trends">
    <div class="card-grid-2">
      <!-- Trend Search -->
      <div class="hub-card">
        <div class="hub-card-title">
          <i class="fas fa-search"></i> Analyze Sustainability Trends
        </div>
        <p>Search for emerging sustainability trends and get detailed intelligence on their strategic implications.</p>
        
        <div class="trend-search">
          <input type="text" id="trend-search-input" placeholder="Enter a sustainability trend (e.g., 'Carbon Offsetting')">
          <button class="action-btn" id="trend-search-btn">Analyze</button>
        </div>
        
        <div>
          <p>Popular trends:</p>
          <div style="margin-top: 0.5rem;">
            <span class="trend-tag" data-trend="Circular Economy">Circular Economy</span>
            <span class="trend-tag" data-trend="Sustainable Supply Chain">Sustainable Supply Chain</span>
            <span class="trend-tag" data-trend="Net Zero Transition">Net Zero Transition</span>
            <span class="trend-tag" data-trend="ESG Reporting">ESG Reporting</span>
            <span class="trend-tag" data-trend="Carbon Credits">Carbon Credits</span>
            <span class="trend-tag" data-trend="Renewable Energy">Renewable Energy</span>
          </div>
        </div>
      </div>
      
      <!-- Trend Results -->
      <div class="hub-card" id="trend-results" style="display: none;">
        <div class="hub-card-title">
          <i class="fas fa-chart-line"></i> <span id="trend-results-title">Trend Analysis</span>
        </div>
        
        <div class="trend-score" id="trend-virality-score">78</div>
        <div class="score-label">Virality Score</div>
        
        <!-- Interactive STEPPS Radar Chart -->
        <div class="chart-container">
          <canvas id="steppsRadarChart"></canvas>
        </div>
        
        <!-- STEPPS Grid Items -->
        <div class="stepps-grid">
          <div class="stepps-item">
            <div class="stepps-score" style="color: #36b37e;">82</div>
            <div class="stepps-name">Social Currency</div>
            <div class="stepps-desc">How sharing makes people look</div>
          </div>
          <div class="stepps-item">
            <div class="stepps-score" style="color: #00b8d9;">76</div>
            <div class="stepps-name">Triggers</div>
            <div class="stepps-desc">Environmental reminders</div>
          </div>
          <div class="stepps-item">
            <div class="stepps-score" style="color: #6554c0;">85</div>
            <div class="stepps-name">Emotion</div>
            <div class="stepps-desc">When we care, we share</div>
          </div>
          <div class="stepps-item">
            <div class="stepps-score" style="color: #ff5630;">65</div>
            <div class="stepps-name">Public</div>
            <div class="stepps-desc">Built to show, built to grow</div>
          </div>
          <div class="stepps-item">
            <div class="stepps-score" style="color: #ffab00;">80</div>
            <div class="stepps-name">Practical Value</div>
            <div class="stepps-desc">Useful gets shared</div>
          </div>
          <div class="stepps-item">
            <div class="stepps-score" style="color: #00875a;">78</div>
            <div class="stepps-name">Stories</div>
            <div class="stepps-desc">Information in narratives</div>
          </div>
        </div>
        
        <h3 style="margin-top: 2rem; margin-bottom: 1rem;">Industry Impact</h3>
        
        <div class="industry-impact">
          <div class="impact-label">
            <span>Technology</span>
            <span>85%</span>
          </div>
          <div class="impact-bar">
            <div class="impact-fill" style="width: 85%;"></div>
          </div>
        </div>
        
        <div class="industry-impact">
          <div class="impact-label">
            <span>Manufacturing</span>
            <span>75%</span>
          </div>
          <div class="impact-bar">
            <div class="impact-fill" style="width: 75%;"></div>
          </div>
        </div>
        
        <div class="industry-impact">
          <div class="impact-label">
            <span>Energy</span>
            <span>92%</span>
          </div>
          <div class="impact-bar">
            <div class="impact-fill" style="width: 92%;"></div>
          </div>
        </div>
        
        <div class="industry-impact">
          <div class="impact-label">
            <span>Retail</span>
            <span>65%</span>
          </div>
          <div class="impact-bar">
            <div class="impact-fill" style="width: 65%;"></div>
          </div>
        </div>
        
        <div class="industry-impact">
          <div class="impact-label">
            <span>Finance</span>
            <span>70%</span>
          </div>
          <div class="impact-bar">
            <div class="impact-fill" style="width: 70%;"></div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Strategic Implications -->
    <div class="hub-card" id="strategic-implications" style="display: none; margin-top: 1.5rem;">
      <div class="hub-card-title">
        <i class="fas fa-lightbulb"></i> Strategic Implications
      </div>
      
      <div class="strategic-item">
        <div class="strategic-header">
          <div class="strategic-area">Strategic Assessment</div>
          <div class="strategic-potential potential-high">High Potential</div>
        </div>
        <div class="strategic-timeframe">Short-term (3-6 months)</div>
        <div class="strategic-response">Conduct comprehensive assessment of this trend's impact on organization's value chain</div>
      </div>
      
      <div class="strategic-item">
        <div class="strategic-header">
          <div class="strategic-area">Capability Development</div>
          <div class="strategic-potential potential-medium">Medium Potential</div>
        </div>
        <div class="strategic-timeframe">Medium-term (1-2 years)</div>
        <div class="strategic-response">Build organizational capabilities to leverage this trend for competitive advantage</div>
      </div>
      
      <div class="strategic-item">
        <div class="strategic-header">
          <div class="strategic-area">Innovation Pipeline</div>
          <div class="strategic-potential potential-high">High Potential</div>
        </div>
        <div class="strategic-timeframe">Long-term (2-4 years)</div>
        <div class="strategic-response">Integrate this trend into product development and innovation pipeline</div>
      </div>
    </div>
  </div>

  <!-- Data Analysis Tab -->
  <div class="tab-content" id="data-analysis">
    <div class="card-grid-2">
      <!-- Data Source Integration -->
      <div class="hub-card">
        <div class="hub-card-title">
          <i class="fas fa-database"></i> Data Sources
        </div>
        <p>Connect to your sustainability data sources for comprehensive analysis and insights.</p>
        
        <div class="data-source-grid">
          <div class="data-source-item">
            <div class="data-source-icon">
              <i class="fas fa-cloud"></i>
            </div>
            <div class="data-source-info">
              <div class="data-source-name">API Connection</div>
              <div class="data-source-desc">Connect to external sustainability APIs</div>
              <button class="small-action-btn">Connect</button>
            </div>
          </div>
          
          <div class="data-source-item">
            <div class="data-source-icon">
              <i class="fas fa-hdd"></i>
            </div>
            <div class="data-source-info">
              <div class="data-source-name">Data Lake</div>
              <div class="data-source-desc">Import from your organization's data lake</div>
              <button class="small-action-btn">Connect</button>
            </div>
          </div>
          
          <div class="data-source-item">
            <div class="data-source-icon">
              <i class="fas fa-file-csv"></i>
            </div>
            <div class="data-source-info">
              <div class="data-source-name">CSV/Excel Import</div>
              <div class="data-source-desc">Upload structured data files</div>
              <button class="small-action-btn">Upload</button>
            </div>
          </div>
          
          <div class="data-source-item">
            <div class="data-source-icon">
              <i class="fas fa-file-pdf"></i>
            </div>
            <div class="data-source-info">
              <div class="data-source-name">PDF Analysis</div>
              <div class="data-source-desc">Extract data from reports and documents</div>
              <button class="small-action-btn">Upload</button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Data Analysis Dashboard -->
      <div class="hub-card">
        <div class="hub-card-title">
          <i class="fas fa-chart-line"></i> Sustainability Metrics
        </div>
        <p>Key sustainability performance indicators and metrics analysis.</p>
        
        <div class="metrics-dashboard">
          <div class="metrics-row">
            <div class="metric-box">
              <div class="metric-label">Carbon Footprint</div>
              <div class="metric-value">42.8</div>
              <div class="metric-unit">tCO2e</div>
              <div class="metric-trend down">↓ 12.5%</div>
            </div>
            
            <div class="metric-box">
              <div class="metric-label">Energy Usage</div>
              <div class="metric-value">238</div>
              <div class="metric-unit">MWh</div>
              <div class="metric-trend down">↓ 8.3%</div>
            </div>
            
            <div class="metric-box">
              <div class="metric-label">Waste Diverted</div>
              <div class="metric-value">76.2</div>
              <div class="metric-unit">%</div>
              <div class="metric-trend up">↑ 5.1%</div>
            </div>
          </div>
          
          <div class="chart-container">
            <canvas id="sustainabilityPerformanceChart"></canvas>
          </div>
          
          <div class="chart-legend-container">
            <div class="chart-legend-item">
              <div class="legend-color" style="background-color: #36b37e;"></div>
              <div class="legend-text">Carbon Emissions</div>
            </div>
            <div class="chart-legend-item">
              <div class="legend-color" style="background-color: #00b8d9;"></div>
              <div class="legend-text">Energy Consumption</div>
            </div>
            <div class="chart-legend-item">
              <div class="legend-color" style="background-color: #6554c0;"></div>
              <div class="legend-text">Waste Metrics</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Advanced Analytics Card -->
    <div class="hub-card" style="margin-top: 1.5rem;">
      <div class="hub-card-title">
        <i class="fas fa-brain"></i> Advanced Analytics
      </div>
      <p>AI-powered data analysis to identify strategic patterns and opportunities.</p>
      
      <div class="analytics-options">
        <div class="analytics-option-card">
          <div class="analytics-icon">
            <i class="fas fa-project-diagram"></i>
          </div>
          <div class="analytics-title">Correlation Analysis</div>
          <div class="analytics-desc">Identify relationships between sustainability metrics and business outcomes.</div>
          <button class="secondary-action-btn">Run Analysis</button>
        </div>
        
        <div class="analytics-option-card">
          <div class="analytics-icon">
            <i class="fas fa-chart-area"></i>
          </div>
          <div class="analytics-title">Forecasting</div>
          <div class="analytics-desc">Predict future sustainability performance based on historical data.</div>
          <button class="secondary-action-btn">Generate Forecast</button>
        </div>
        
        <div class="analytics-option-card">
          <div class="analytics-icon">
            <i class="fas fa-sitemap"></i>
          </div>
          <div class="analytics-title">Scenario Modeling</div>
          <div class="analytics-desc">Model different scenarios to optimize sustainability strategy.</div>
          <button class="secondary-action-btn">Build Scenarios</button>
        </div>
        
        <div class="analytics-option-card">
          <div class="analytics-icon">
            <i class="fas fa-comments"></i>
          </div>
          <div class="analytics-title">Sentiment Analysis</div>
          <div class="analytics-desc">Analyze stakeholder sentiment on sustainability initiatives.</div>
          <button class="secondary-action-btn">Run Analysis</button>
        </div>
      </div>
    </div>
  </div>

  <!-- AI Strategy Consultant Tab -->
  <div class="tab-content" id="ai-consultant">
    <div class="hub-card">
      <div class="hub-card-title">
        <i class="fas fa-robot"></i> AI Strategy Consultant
      </div>
      <p>Get personalized strategic advice from our AI consultant, tailored to your organization's sustainability goals and challenges.</p>
      
      <div style="margin: 2rem 0;">
        <div style="text-align: center; margin-bottom: 1.5rem;">
          <div style="font-size: 5rem; color: var(--primary-color);">
            <i class="fas fa-comment-dots"></i>
          </div>
          <h3 style="margin-top: 1rem;">Start a Strategy Consultation</h3>
          <p style="color: var(--medium-text); margin-top: 0.5rem;">Our AI consultant will analyze your data and provide personalized strategic recommendations</p>
        </div>
        
        <div style="text-align: center;">
          <button class="action-btn" id="start-consultation-btn">Begin Consultation</button>
        </div>
      </div>
      
      <div class="card-grid">
        <div class="resource-card">
          <div class="resource-icon">
            <i class="fas fa-leaf"></i>
          </div>
          <div class="resource-content">
            <div class="resource-title">Sustainability Strategy Template</div>
            <div class="resource-desc">A comprehensive template to develop your sustainability strategy</div>
          </div>
        </div>
        
        <div class="resource-card">
          <div class="resource-icon">
            <i class="fas fa-chart-bar"></i>
          </div>
          <div class="resource-content">
            <div class="resource-title">Materiality Assessment Guide</div>
            <div class="resource-desc">Step-by-step guide to conducting a materiality assessment</div>
          </div>
        </div>
        
        <div class="resource-card">
          <div class="resource-icon">
            <i class="fas fa-bullseye"></i>
          </div>
          <div class="resource-content">
            <div class="resource-title">Science-Based Targets Toolkit</div>
            <div class="resource-desc">Tools and resources for setting science-based climate targets</div>
          </div>
        </div>
        
        <div class="resource-card" onclick="window.location.href='/framework-selection-guide'">
          <div class="resource-icon">
            <i class="fas fa-compass"></i>
          </div>
          <div class="resource-content">
            <div class="resource-title">Framework Selection Guide</div>
            <div class="resource-desc">Interactive tool to find the perfect sustainability reporting framework</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>

<!-- JavaScript for interactive features -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Tab navigation
    const tabs = document.querySelectorAll('.hub-tab');
    const tabContents = document.querySelectorAll('.tab-content');
    
    // Initialize charts for the active tab on page load
    const activeTabContent = document.querySelector('.tab-content.active');
    if (activeTabContent) {
      if (activeTabContent.id === 'data-analysis') {
        initSustainabilityPerformanceChart();
      } else if (activeTabContent.id === 'virality-trends') {
        // Initialize chart if trend results are displayed
        if (document.getElementById('trend-results').style.display !== 'none') {
          initSteppsRadarChart();
        }
      }
    }
    
    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const tabId = tab.getAttribute('data-tab');
        
        // Update active tab
        tabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        
        // Show corresponding content
        tabContents.forEach(content => {
          content.classList.remove('active');
          if (content.id === tabId) {
            content.classList.add('active');
            
            // Initialize charts based on active tab
            if (tabId === 'data-analysis') {
              initSustainabilityPerformanceChart();
            }
          }
        });
      });
    });
    
    // PDF Uploader
    const dropzone = document.getElementById('pdf-dropzone');
    const fileInput = document.getElementById('pdf-upload');
    const uploadBtn = document.getElementById('upload-btn');
    
    // Setup dropzone
    if (dropzone && fileInput) {
      dropzone.addEventListener('click', () => {
        fileInput.click();
      });
      
      dropzone.addEventListener('dragover', (e) => {
        e.preventDefault();
        dropzone.style.borderColor = '#36b37e';
        dropzone.style.backgroundColor = 'rgba(54, 179, 126, 0.05)';
      });
      
      dropzone.addEventListener('dragleave', () => {
        dropzone.style.borderColor = 'rgba(255, 255, 255, 0.2)';
        dropzone.style.backgroundColor = 'transparent';
      });
      
      dropzone.addEventListener('drop', (e) => {
        e.preventDefault();
        dropzone.style.borderColor = 'rgba(255, 255, 255, 0.2)';
        dropzone.style.backgroundColor = 'transparent';
        
        if (e.dataTransfer.files.length) {
          fileInput.files = e.dataTransfer.files;
          handleFileUpload(e.dataTransfer.files[0]);
        }
      });
      
      fileInput.addEventListener('change', () => {
        if (fileInput.files.length) {
          handleFileUpload(fileInput.files[0]);
        }
      });
      
      if (uploadBtn) {
        uploadBtn.addEventListener('click', () => {
          fileInput.click();
        });
      }
    }
    
    // Trend Search
    const trendSearchBtn = document.getElementById('trend-search-btn');
    const trendSearchInput = document.getElementById('trend-search-input');
    const trendTags = document.querySelectorAll('.trend-tag');
    const trendResults = document.getElementById('trend-results');
    const trendResultsTitle = document.getElementById('trend-results-title');
    const strategicImplications = document.getElementById('strategic-implications');
    
    if (trendSearchBtn && trendSearchInput) {
      trendSearchBtn.addEventListener('click', () => {
        const trend = trendSearchInput.value.trim();
        if (trend) {
          analyzeTrend(trend);
        }
      });
      
      trendSearchInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          const trend = trendSearchInput.value.trim();
          if (trend) {
            analyzeTrend(trend);
          }
        }
      });
    }
    
    if (trendTags) {
      trendTags.forEach(tag => {
        tag.addEventListener('click', () => {
          const trend = tag.getAttribute('data-trend');
          if (trendSearchInput) {
            trendSearchInput.value = trend;
          }
          analyzeTrend(trend);
        });
      });
    }
    
    // Document cards
    const documentCards = document.querySelectorAll('.document-card');
    if (documentCards) {
      documentCards.forEach(card => {
        card.addEventListener('click', () => {
          const documentId = card.getAttribute('data-id');
          if (documentId) {
            window.location.href = `/strategy/document/${documentId}`;
          }
        });
      });
    }
    
    // Create Story Button
    const createStoryBtn = document.getElementById('create-story-btn');
    if (createStoryBtn) {
      createStoryBtn.addEventListener('click', () => {
        window.location.href = '/storytelling/create';
      });
    }
    
    // Start Consultation Button
    const startConsultationBtn = document.getElementById('start-consultation-btn');
    if (startConsultationBtn) {
      startConsultationBtn.addEventListener('click', () => {
        window.location.href = '/strategy/ai-consultant';
      });
    }
    
    // Function to handle file upload
    function handleFileUpload(file) {
      const allowedTypes = [
        'application/pdf', 
        'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
        'application/msword',
        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
        'application/vnd.ms-excel',
        'text/csv'
      ];
      
      if (!allowedTypes.includes(file.type)) {
        alert('Please select a valid document file (PDF, DOCX, XLSX, or CSV)');
        return;
      }
      
      // In a real implementation, you would upload the file to the server
      // For now, just show the filename
      dropzone.innerHTML = `
        <div class="pdf-icon">
          <i class="fas fa-file-${getFileIcon(file.type)}"></i>
        </div>
        <p>${file.name}</p>
        <small>${Math.round(file.size / 1024)} KB</small>
      `;
      
      uploadBtn.textContent = 'Analyze Document';
      uploadBtn.addEventListener('click', () => {
        // Create FormData
        const formData = new FormData();
        formData.append('file', file);
        
        // Get analysis options
        const extractEntities = document.getElementById('extract-entities')?.checked || false;
        const benchmark = document.getElementById('benchmark')?.checked || false;
        const regulatoryCheck = document.getElementById('regulatory-check')?.checked || false;
        
        formData.append('extract_entities', extractEntities);
        formData.append('benchmark', benchmark);
        formData.append('regulatory_check', regulatoryCheck);
        
        // In a real implementation, you would send this to the server
        uploadBtn.textContent = 'Analyzing...';
        uploadBtn.disabled = true;
        
        // Simulate uploading
        setTimeout(() => {
          alert(`Analysis started for ${file.name}. You will be notified when it's complete.`);
          uploadBtn.textContent = 'Upload Document';
          uploadBtn.disabled = false;
          
          // Reset the dropzone
          dropzone.innerHTML = `
            <div class="pdf-icon">
              <i class="fas fa-file-upload"></i>
            </div>
            <p>Drag & drop a document or click to browse</p>
            <small>Supported formats: PDF, DOCX, XLSX, CSV</small>
            
            <div class="analysis-options">
              <div class="analysis-option">
                <input type="checkbox" id="extract-entities" checked>
                <label for="extract-entities">Extract Entities</label>
              </div>
              <div class="analysis-option">
                <input type="checkbox" id="benchmark" checked>
                <label for="benchmark">Industry Benchmark</label>
              </div>
              <div class="analysis-option">
                <input type="checkbox" id="regulatory-check" checked>
                <label for="regulatory-check">Regulatory Check</label>
              </div>
            </div>
          `;
        }, 2000);
      }, { once: true });
    }
    
    // Function to analyze trends
    function analyzeTrend(trend) {
      if (!trend) return;
      
      // In a real implementation, you would fetch the analysis from the server
      // For now, just update the UI with the trend name
      if (trendResultsTitle) {
        trendResultsTitle.textContent = trend + ' Analysis';
      }
      
      if (trendResults) {
        trendResults.style.display = 'block';
      }
      
      if (strategicImplications) {
        strategicImplications.style.display = 'block';
      }
      
      // Update strategic responses with the trend name
      const strategicResponses = document.querySelectorAll('.strategic-response');
      if (strategicResponses) {
        strategicResponses.forEach(response => {
          const text = response.textContent;
          response.textContent = text.replace('this trend', trend);
        });
      }
      
      // Initialize the STEPPS radar chart
      initSteppsRadarChart();
    }
    
    // Initialize STEPPS Radar Chart
    function initSteppsRadarChart() {
      const ctx = document.getElementById('steppsRadarChart');
      
      if (!ctx) return;
      
      // Get values from STEPPS grid items
      const steppsScores = Array.from(document.querySelectorAll('.stepps-score')).map(el => parseInt(el.textContent));
      const steppsNames = Array.from(document.querySelectorAll('.stepps-name')).map(el => el.textContent);
      
      // Create a Chart.js radar chart
      new Chart(ctx, {
        type: 'radar',
        data: {
          labels: steppsNames,
          datasets: [{
            label: 'STEPPS Framework Analysis',
            data: steppsScores,
            fill: true,
            backgroundColor: 'rgba(54, 179, 126, 0.2)',
            borderColor: '#36b37e',
            pointBackgroundColor: '#36b37e',
            pointBorderColor: '#fff',
            pointHoverBackgroundColor: '#fff',
            pointHoverBorderColor: '#36b37e'
          }]
        },
        options: {
          elements: {
            line: {
              borderWidth: 3
            }
          },
          scales: {
            r: {
              angleLines: {
                color: 'rgba(255, 255, 255, 0.1)'
              },
              grid: {
                color: 'rgba(255, 255, 255, 0.1)'
              },
              pointLabels: {
                color: '#f4f5f7',
                font: {
                  size: 12
                }
              },
              ticks: {
                backdropColor: 'transparent',
                color: '#c1c7d0'
              },
              suggestedMin: 0,
              suggestedMax: 100
            }
          },
          plugins: {
            legend: {
              display: false
            },
            tooltip: {
              backgroundColor: 'rgba(23, 43, 77, 0.9)',
              titleColor: '#f4f5f7',
              bodyColor: '#f4f5f7',
              borderColor: 'rgba(54, 179, 126, 0.3)',
              borderWidth: 1
            }
          }
        }
      });
    }
    
    // Initialize Sustainability Performance Chart
    function initSustainabilityPerformanceChart() {
      const ctx = document.getElementById('sustainabilityPerformanceChart');
      
      if (!ctx) return;
      
      // Sample data for sustainability performance chart
      const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
      
      // Create a Chart.js line chart
      new Chart(ctx, {
        type: 'line',
        data: {
          labels: months,
          datasets: [
            {
              label: 'Carbon Emissions',
              data: [48, 46, 45, 43, 44, 42, 41, 40, 42, 43, 41, 38],
              borderColor: '#36b37e',
              backgroundColor: 'rgba(54, 179, 126, 0.1)',
              tension: 0.4,
              fill: true
            },
            {
              label: 'Energy Consumption',
              data: [250, 245, 248, 240, 235, 230, 232, 235, 230, 228, 225, 220],
              borderColor: '#00b8d9',
              backgroundColor: 'rgba(0, 184, 217, 0.1)',
              tension: 0.4,
              fill: true
            },
            {
              label: 'Waste Diversion',
              data: [68, 69, 71, 72, 74, 73, 75, 77, 74, 76, 78, 80],
              borderColor: '#6554c0',
              backgroundColor: 'rgba(101, 84, 192, 0.1)',
              tension: 0.4,
              fill: true
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          elements: {
            line: {
              borderWidth: 2
            },
            point: {
              radius: 3,
              hoverRadius: 5
            }
          },
          scales: {
            x: {
              grid: {
                color: 'rgba(255, 255, 255, 0.05)'
              },
              ticks: {
                color: '#c1c7d0'
              }
            },
            y: {
              grid: {
                color: 'rgba(255, 255, 255, 0.05)'
              },
              ticks: {
                color: '#c1c7d0'
              }
            }
          },
          plugins: {
            tooltip: {
              backgroundColor: 'rgba(23, 43, 77, 0.9)',
              titleColor: '#f4f5f7',
              bodyColor: '#f4f5f7',
              borderColor: 'rgba(255, 255, 255, 0.1)',
              borderWidth: 1
            },
            legend: {
              display: false
            }
          }
        }
      });
    }
    
    // Helper function to get file icon based on file type
    function getFileIcon(fileType) {
      switch (fileType) {
        case 'application/pdf':
          return 'pdf';
        case 'application/vnd.openxmlformats-officedocument.wordprocessingml.document':
        case 'application/msword':
          return 'word';
        case 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':
        case 'application/vnd.ms-excel':
          return 'excel';
        case 'text/csv':
          return 'csv';
        default:
          return 'alt';
      }
    }
    // Monetization Tab Functionality
    function initMonetizationTab() {
      // Analyze Strategy button functionality
      const analyzeStrategyButtons = document.querySelectorAll('.analyze-strategy');
      
      analyzeStrategyButtons.forEach(button => {
        button.addEventListener('click', () => {
          const strategyId = button.getAttribute('data-strategy-id');
          
          // API call to analyze strategy
          fetch(`/api/monetization/analyze?strategy_id=${strategyId}`, {
            method: 'GET',
            headers: {
              'Content-Type': 'application/json'
            }
          })
          .then(response => response.json())
          .then(data => {
            if (data.success) {
            // Display results
            alert(`Strategy ${strategyId} analyzed: ${data.potential_score}% potential`);
          } else {
            console.error('Strategy analysis failed:', data.message);
          }
        })
        .catch(error => {
          console.error('Error analyzing strategy:', error);
        });
      });
    });
    
    // Generate Strategic Plan functionality
    const generatePlanBtn = document.getElementById('generate-plan-btn');
    const strategicPlanResults = document.getElementById('strategic-plan-results');
    
    if (generatePlanBtn) {
      generatePlanBtn.addEventListener('click', () => {
        // Get form values
        const companyName = document.getElementById('company-name').value || 'Your Company';
        const industry = document.getElementById('industry').value;
        
        // Get selected objectives
        const objectives = [];
        if (document.getElementById('objective-revenue').checked) objectives.push('Revenue Growth');
        if (document.getElementById('objective-differentiation').checked) objectives.push('Market Differentiation');
        if (document.getElementById('objective-innovation').checked) objectives.push('Product Innovation');
        if (document.getElementById('objective-compliance').checked) objectives.push('Regulatory Compliance');
        
        // Get selected focus areas
        const focusAreas = [];
        if (document.getElementById('focus-climate').checked) focusAreas.push('Climate Action');
        if (document.getElementById('focus-circular').checked) focusAreas.push('Circular Economy');
        if (document.getElementById('focus-social').checked) focusAreas.push('Social Impact');
        if (document.getElementById('focus-biodiversity').checked) focusAreas.push('Biodiversity');
        
        // If no selections, set defaults
        if (objectives.length === 0) objectives.push('Revenue Growth');
        if (focusAreas.length === 0) focusAreas.push('Climate Action');
        
        // Make API request
        fetch('/api/monetization/strategic-plan', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            company_name: companyName,
            industry: industry,
            objectives: objectives,
            focus_areas: focusAreas
          })
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            // Update UI with plan
            document.getElementById('plan-title').textContent = `Strategic Plan for ${companyName}`;
            document.querySelector('.plan-company').textContent = companyName;
            document.querySelector('.plan-industry').textContent = industry;
            
            // Format and display plan content
            const planContent = document.getElementById('plan-content');
            planContent.innerHTML = formatStrategicPlan(data.plan);
            
            // Show results section
            strategicPlanResults.style.display = 'block';
            
            // Scroll to results
            strategicPlanResults.scrollIntoView({ behavior: 'smooth' });
          } else {
            console.error('Plan generation failed:', data.message);
            alert('Failed to generate strategic plan. Please try again.');
          }
        })
        .catch(error => {
          console.error('Error generating plan:', error);
          alert('An error occurred while generating the plan. Please try again.');
        });
      });
    }
    
    // Export Plan button functionality
    const exportPlanBtn = document.getElementById('export-plan-btn');
    if (exportPlanBtn) {
      exportPlanBtn.addEventListener('click', () => {
        const companyName = document.querySelector('.plan-company').textContent;
        const planContent = document.getElementById('plan-content').innerHTML;
        
        // Prepare data for export
        const exportData = {
          company_name: companyName,
          plan_html: planContent
        };
        
        // Make API request to export
        fetch('/api/monetization/export-plan', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(exportData)
        })
        .then(response => response.blob())
        .then(blob => {
          // Create a download link
          const url = window.URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.style.display = 'none';
          a.href = url;
          a.download = `${companyName.replace(/\s+/g, '_')}_Strategic_Plan.pdf`;
          document.body.appendChild(a);
          a.click();
          window.URL.revokeObjectURL(url);
        })
        .catch(error => {
          console.error('Error exporting plan:', error);
          alert('Failed to export the strategic plan. Please try again.');
        });
      });
    }
  }
  
    function formatStrategicPlan(plan) {
      if (!plan || !plan.sections) {
        return '<p>No plan data available</p>';
      }
      
      let html = '';
      
      plan.sections.forEach(section => {
        html += `<h3>${section.title}</h3>`;
        html += `<p>${section.content}</p>`;
        
        if (section.items && section.items.length > 0) {
          html += '<ul>';
          section.items.forEach(item => {
            html += `<li>${item}</li>`;
          });
          html += '</ul>';
        }
      });
      
      return html;
    }
    
    // Initialize the monetization tab when it becomes active
    tabs.forEach(tab => {
      if (tab.getAttribute('data-tab') === 'monetization') {
        tab.addEventListener('click', () => {
          // Initialize monetization tab when it's clicked
          initMonetizationTab();
        });
      }
    });

    // Initialize monetization tab if it's the active tab on page load
    if (document.querySelector('.hub-tab.active').getAttribute('data-tab') === 'monetization') {
      initMonetizationTab();
    }
  });
</script>

            </main>
            
            <footer>
                <div class="container">
                    <div class="row">
                        <div class="col-md-6">
                            <p>&copy; 2025 SustainaTrend™ Intelligence Platform</p>
                        </div>
                        <div class="col-md-6 text-end">
                            <a href="#" class="text-decoration-none">Privacy Policy</a> | 
                            <a href="#" class="text-decoration-none">Terms of Service</a>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <!-- Theme Toggle Script -->
    <script>
        $(document).ready(function() {
            // Sidebar toggle
            $('#sidebarCollapse').on('click', function() {
                $('#sidebar').toggleClass('active');
                $('#content').toggleClass('active');
            });
            
            // Theme toggle
            $('#themeSwitch').change(function() {
                if($(this).is(':checked')) {
                    // Dark mode
                    $('html').removeClass('light-mode').addClass('dark-mode');
                    // Store preference
                    localStorage.setItem('theme', 'dark-mode');
                } else {
                    // Light mode
                    $('html').removeClass('dark-mode').addClass('light-mode');
                    // Store preference
                    localStorage.setItem('theme', 'light-mode');
                }
            });
            
            // Check for saved theme preference
            const savedTheme = localStorage.getItem('theme');
            if(savedTheme) {
                if(savedTheme === 'dark-mode') {
                    $('#themeSwitch').prop('checked', true);
                    $('html').removeClass('light-mode').addClass('dark-mode');
                } else {
                    $('#themeSwitch').prop('checked', false);
                    $('html').removeClass('dark-mode').addClass('light-mode');
                }
            }
        });
    </script>
    
    
</body>
</html>