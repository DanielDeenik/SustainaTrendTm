{% extends "layouts/finchat_dark_layout.html" %}

{% set active_nav = 'overview' %}

{% block header_title %}Sustainability Overview{% endblock %}

{% block main_content %}
<div class="finchat-card">
    <div class="finchat-card-header">
        <h2>Sustainability Overview</h2>
        <div class="finchat-card-actions">
            <button class="finchat-button-secondary">
                <i class="fas fa-download"></i> Export
            </button>
            <button class="finchat-button-primary">
                <i class="fas fa-sync"></i> Refresh
            </button>
        </div>
    </div>
    
    <div class="finchat-card-content">
        <div class="finchat-grid-3">
            <div class="finchat-metric-card">
                <div class="finchat-metric-icon">
                    <i class="fas fa-leaf"></i>
                </div>
                <div class="finchat-metric-content">
                    <div class="finchat-metric-title">Overall ESG Score</div>
                    <div class="finchat-metric-value">78</div>
                    <div class="finchat-metric-unit">/ 100</div>
                    <div class="finchat-metric-change increase">
                        <i class="fas fa-caret-up"></i> 5.4%
                    </div>
                </div>
            </div>
            
            <div class="finchat-metric-card">
                <div class="finchat-metric-icon">
                    <i class="fas fa-trophy"></i>
                </div>
                <div class="finchat-metric-content">
                    <div class="finchat-metric-title">Industry Ranking</div>
                    <div class="finchat-metric-value">Top 15%</div>
                    <div class="finchat-metric-unit">percentile</div>
                    <div class="finchat-metric-change increase">
                        <i class="fas fa-caret-up"></i> 3 positions
                    </div>
                </div>
            </div>
            
            <div class="finchat-metric-card">
                <div class="finchat-metric-icon">
                    <i class="fas fa-bullseye"></i>
                </div>
                <div class="finchat-metric-content">
                    <div class="finchat-metric-title">Target Achievement</div>
                    <div class="finchat-metric-value">62%</div>
                    <div class="finchat-metric-unit">completion</div>
                    <div class="finchat-metric-change increase">
                        <i class="fas fa-caret-up"></i> 8.3%
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="finchat-grid-2">
    <div class="finchat-card">
        <div class="finchat-card-header">
            <h3>ESG Category Performance</h3>
        </div>
        <div class="finchat-card-content">
            <div class="finchat-chart-container">
                <canvas id="esgCategoryChart"></canvas>
            </div>
        </div>
    </div>
    
    <div class="finchat-card">
        <div class="finchat-card-header">
            <h3>Sustainability Timeline</h3>
        </div>
        <div class="finchat-card-content">
            <div class="finchat-timeline">
                <div class="finchat-timeline-item">
                    <div class="finchat-timeline-date">Apr 2025</div>
                    <div class="finchat-timeline-content">
                        <h4>Renewable Energy Milestone</h4>
                        <p>Reached 42% renewable energy usage, on track for 2030 goal.</p>
                    </div>
                </div>
                <div class="finchat-timeline-item">
                    <div class="finchat-timeline-date">Feb 2025</div>
                    <div class="finchat-timeline-content">
                        <h4>Waste Reduction Program</h4>
                        <p>Implemented comprehensive waste reduction program across all facilities.</p>
                    </div>
                </div>
                <div class="finchat-timeline-item">
                    <div class="finchat-timeline-date">Dec 2024</div>
                    <div class="finchat-timeline-content">
                        <h4>Carbon Footprint Report</h4>
                        <p>Published annual carbon footprint report showing 12.3% reduction.</p>
                    </div>
                </div>
                <div class="finchat-timeline-item">
                    <div class="finchat-timeline-date">Sep 2024</div>
                    <div class="finchat-timeline-content">
                        <h4>Water Conservation Project</h4>
                        <p>Launched water conservation project targeting 15% reduction by 2026.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="finchat-card">
    <div class="finchat-card-header">
        <h3>SDG Alignment</h3>
    </div>
    <div class="finchat-card-content">
        <div class="finchat-sdg-grid">
            <div class="finchat-sdg-item active">
                <div class="finchat-sdg-icon">7</div>
                <div class="finchat-sdg-text">Affordable and Clean Energy</div>
            </div>
            <div class="finchat-sdg-item active">
                <div class="finchat-sdg-icon">9</div>
                <div class="finchat-sdg-text">Industry, Innovation and Infrastructure</div>
            </div>
            <div class="finchat-sdg-item active">
                <div class="finchat-sdg-icon">12</div>
                <div class="finchat-sdg-text">Responsible Consumption and Production</div>
            </div>
            <div class="finchat-sdg-item active">
                <div class="finchat-sdg-icon">13</div>
                <div class="finchat-sdg-text">Climate Action</div>
            </div>
            <div class="finchat-sdg-item">
                <div class="finchat-sdg-icon">6</div>
                <div class="finchat-sdg-text">Clean Water and Sanitation</div>
            </div>
            <div class="finchat-sdg-item">
                <div class="finchat-sdg-icon">11</div>
                <div class="finchat-sdg-text">Sustainable Cities and Communities</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block insights_panel %}
<div class="finchat-insights-header">
    <h3>Overview Insights</h3>
    <button class="finchat-button-icon" id="closeInsights">
        <i class="fas fa-times"></i>
    </button>
</div>

<div class="finchat-insights-content">
    <div class="finchat-insight-item">
        <div class="finchat-insight-icon">
            <i class="fas fa-lightbulb"></i>
        </div>
        <div class="finchat-insight-content">
            <h4>Industry Comparison</h4>
            <p>Your overall ESG score places you in the top 15% of your industry peers, up 3 positions from last quarter.</p>
        </div>
    </div>
    
    <div class="finchat-insight-item">
        <div class="finchat-insight-icon">
            <i class="fas fa-chart-line"></i>
        </div>
        <div class="finchat-insight-content">
            <h4>Progress Highlight</h4>
            <p>You've made the most progress in Governance metrics, improving 8.7% year-over-year. Environmental metrics show steady improvement at 5.4%.</p>
        </div>
    </div>
    
    <div class="finchat-insight-item">
        <div class="finchat-insight-icon">
            <i class="fas fa-exclamation-circle"></i>
        </div>
        <div class="finchat-insight-content">
            <h4>Focus Area</h4>
            <p>Social metrics have the most room for improvement, particularly in supply chain transparency and community engagement.</p>
        </div>
    </div>
</div>
{% endblock %}

{% block additional_scripts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // ESG Category Performance Chart
        const esgCtx = document.getElementById('esgCategoryChart').getContext('2d');
        const esgChart = new Chart(esgCtx, {
            type: 'radar',
            data: {
                labels: ['Environmental', 'Social', 'Governance', 'Climate Risk', 'Resource Use', 'Human Capital'],
                datasets: [{
                    label: 'Current Score',
                    data: [85, 72, 78, 65, 81, 76],
                    backgroundColor: 'rgba(76, 175, 80, 0.2)',
                    borderColor: 'rgba(76, 175, 80, 1)',
                    borderWidth: 2,
                    pointBackgroundColor: 'rgba(76, 175, 80, 1)'
                }, {
                    label: 'Industry Average',
                    data: [65, 68, 72, 58, 63, 70],
                    backgroundColor: 'rgba(33, 150, 243, 0.2)',
                    borderColor: 'rgba(33, 150, 243, 1)',
                    borderWidth: 2,
                    pointBackgroundColor: 'rgba(33, 150, 243, 1)'
                }]
            },
            options: {
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            stepSize: 20
                        }
                    }
                }
            }
        });
        
        // Add custom styles for the timeline and SDG grid
        const styleElement = document.createElement('style');
        styleElement.textContent = `
            .finchat-timeline {
                padding: 20px 0;
            }
            
            .finchat-timeline-item {
                display: flex;
                margin-bottom: 24px;
                position: relative;
            }
            
            .finchat-timeline-item:before {
                content: '';
                position: absolute;
                left: 100px;
                top: 0;
                bottom: -24px;
                width: 2px;
                background-color: var(--fc-border);
            }
            
            .finchat-timeline-item:last-child:before {
                display: none;
            }
            
            .finchat-timeline-date {
                width: 100px;
                flex-shrink: 0;
                font-weight: 600;
                color: var(--fc-primary);
            }
            
            .finchat-timeline-content {
                margin-left: 24px;
                background-color: var(--fc-bg-tertiary);
                padding: 12px;
                border-radius: var(--fc-radius);
                border-left: 3px solid var(--fc-primary);
            }
            
            .finchat-timeline-content h4 {
                margin: 0 0 4px 0;
                font-size: 0.9rem;
            }
            
            .finchat-timeline-content p {
                margin: 0;
                color: var(--fc-text-secondary);
                font-size: 0.85rem;
            }
            
            .finchat-sdg-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
                gap: 16px;
            }
            
            .finchat-sdg-item {
                display: flex;
                align-items: center;
                padding: 12px;
                background-color: var(--fc-bg-tertiary);
                border-radius: var(--fc-radius);
                opacity: 0.6;
            }
            
            .finchat-sdg-item.active {
                opacity: 1;
                border-left: 3px solid var(--fc-primary);
            }
            
            .finchat-sdg-icon {
                width: 32px;
                height: 32px;
                display: flex;
                align-items: center;
                justify-content: center;
                background-color: var(--fc-bg-hover);
                color: var(--fc-text-primary);
                border-radius: 50%;
                font-weight: 700;
                margin-right: 12px;
                flex-shrink: 0;
            }
            
            .finchat-sdg-text {
                font-size: 0.85rem;
            }
        `;
        document.head.appendChild(styleElement);
    });
</script>
{% endblock %}