{% extends "base.html" %}

{% block title %}Strategy Simulation & McKinsey-Style Reporting | SustainaTrendâ„¢{% endblock %}

{% block additional_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/strategy-simulation.css') }}">
{% endblock %}

{% block content %}
<div class="strategy-dashboard">
    <div class="dashboard-header">
        <h1>Strategy Simulation & McKinsey-Style Reporting</h1>
        <p class="lead">Generate executive-level insights and recommendations by applying strategic frameworks to your sustainability data.</p>
    </div>

    <div class="row">
        <div class="col-md-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title"><i class="icon-strategy"></i> 1. Select Strategic Framework</h5>
                    <p class="card-text">Choose a strategic framework to analyze your sustainability data.</p>
                    
                    <form id="framework-selector">
                        <div class="form-group">
                            <label for="companyName">Company Name</label>
                            <input type="text" class="form-control" id="companyName" value="{{ company_name }}">
                        </div>
                        
                        <div class="form-group">
                            <label for="industry">Industry</label>
                            <input type="text" class="form-control" id="industry" value="{{ industry }}">
                        </div>
                        
                        <div class="form-group">
                            <label>Select Strategic Framework</label>
                            <div class="framework-options">
                                {% for key, framework in frameworks.items() %}
                                <div class="framework-option" data-framework="{{ key }}">
                                    <div class="framework-icon">
                                        <i data-lucide="{{ framework.icon }}"></i>
                                    </div>
                                    <div class="framework-details">
                                        <h6>{{ framework.name }}</h6>
                                        <p class="small">{{ framework.description }}</p>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            
            <div class="card mt-4">
                <div class="card-body">
                    <h5 class="card-title"><i class="icon-upload"></i> 2. Select Data Source</h5>
                    <p class="card-text">Choose a source for your sustainability data.</p>
                    
                    <div class="data-source-options">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataSource" id="sampleDataOption" value="sample" checked>
                            <label class="form-check-label" for="sampleDataOption">
                                Use sample data
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataSource" id="portfolioDataOption" value="portfolio">
                            <label class="form-check-label" for="portfolioDataOption">
                                Use my portfolio data
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataSource" id="uploadDataOption" value="upload">
                            <label class="form-check-label" for="uploadDataOption">
                                Upload data file
                            </label>
                        </div>
                    </div>
                    
                    <div id="uploadForm" class="mt-3" style="display: none;">
                        <div class="input-group">
                            <input type="file" class="form-control" id="fileUpload">
                            <button class="btn btn-outline-secondary" type="button" id="uploadButton">Upload</button>
                        </div>
                        <small class="form-text text-muted">Upload CSV or Excel file with sustainability metrics.</small>
                    </div>
                </div>
            </div>
            
            <div class="card mt-4">
                <div class="card-body">
                    <h5 class="card-title"><i class="icon-settings"></i> 3. Configure Analysis</h5>
                    <p class="card-text">Set additional parameters for your analysis.</p>
                    
                    <div class="form-group">
                        <label for="timeframeSelector">Analysis Timeframe</label>
                        <select class="form-control" id="timeframeSelector">
                            <option value="current">Current Snapshot</option>
                            <option value="1year">1-Year Projection</option>
                            <option value="3year">3-Year Projection</option>
                            <option value="5year">5-Year Projection</option>
                        </select>
                    </div>
                    
                    <div class="form-group mt-3">
                        <label for="focusSelector">Analysis Focus</label>
                        <select class="form-control" id="focusSelector">
                            <option value="all">All Sustainability Categories</option>
                            <option value="emissions">Carbon Emissions</option>
                            <option value="energy">Energy Efficiency</option>
                            <option value="water">Water Management</option>
                            <option value="waste">Waste Management</option>
                            <option value="social">Social Impact</option>
                        </select>
                    </div>
                    
                    <div class="mt-4">
                        <button id="runAnalysisBtn" class="btn btn-primary btn-lg w-100">
                            <i data-lucide="bar-chart-2"></i> Run Strategic Analysis
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-md-8">
            <div id="analysisResults" class="analysis-container">
                <div class="initial-state">
                    <div class="text-center my-5 py-5">
                        <div class="framework-placeholder mb-4">
                            <i data-lucide="bar-chart-2" width="64" height="64"></i>
                        </div>
                        <h3>Select a strategic framework and run analysis</h3>
                        <p class="text-muted">Choose a framework from the left panel and click "Run Strategic Analysis" to generate insights.</p>
                    </div>
                </div>
                
                <div id="loadingState" class="loading-state" style="display: none;">
                    <div class="text-center my-5 py-5">
                        <div class="spinner-border text-primary mb-3" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <h3>Analyzing sustainability data...</h3>
                        <p class="text-muted">Applying strategic framework to generate insights...</p>
                    </div>
                </div>
                
                <div id="portersResults" class="framework-results" style="display: none;">
                    <div class="results-header d-flex justify-content-between align-items-center">
                        <h3>Porter's Five Forces Analysis</h3>
                        <div class="actions">
                            <button class="btn btn-sm btn-outline-primary" id="portersExportBtn">
                                <i data-lucide="download"></i> Export
                            </button>
                            <button class="btn btn-sm btn-outline-primary" id="portersPrintBtn">
                                <i data-lucide="printer"></i> Print
                            </button>
                        </div>
                    </div>
                    
                    <div class="results-summary">
                        <div class="row">
                            <div class="col-md-8">
                                <h4>Industry Attractiveness</h4>
                                <div class="attractiveness-meter">
                                    <div class="meter-scale">
                                        <div class="meter-fill" id="portersAttractivenessValue"></div>
                                    </div>
                                    <div class="meter-labels">
                                        <span>Low</span>
                                        <span>Moderate</span>
                                        <span>High</span>
                                    </div>
                                </div>
                                <p class="insights-text">
                                    <span id="portersMainInsight"></span>
                                </p>
                            </div>
                            <div class="col-md-4">
                                <div class="key-metrics-card">
                                    <h5>Key Force Ratings</h5>
                                    <ul class="key-metrics-list" id="portersForcesList">
                                        <!-- Filled dynamically -->
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="results-visualization">
                        <h4>Five Forces Analysis</h4>
                        <div class="forces-diagram" id="forcesVisualization">
                            <!-- Visualization will be rendered here -->
                        </div>
                    </div>
                    
                    <div class="strategic-opportunities">
                        <h4>Strategic Opportunities</h4>
                        <div class="opportunities-list" id="portersOpportunitiesList">
                            <!-- Filled dynamically -->
                        </div>
                    </div>
                </div>
                
                <div id="swotResults" class="framework-results" style="display: none;">
                    <div class="results-header d-flex justify-content-between align-items-center">
                        <h3>SWOT Analysis</h3>
                        <div class="actions">
                            <button class="btn btn-sm btn-outline-primary" id="swotExportBtn">
                                <i data-lucide="download"></i> Export
                            </button>
                            <button class="btn btn-sm btn-outline-primary" id="swotPrintBtn">
                                <i data-lucide="printer"></i> Print
                            </button>
                        </div>
                    </div>
                    
                    <div class="results-summary">
                        <h4>Strategic Posture: <span id="strategicPosture"></span></h4>
                        <p class="insights-text" id="swotMainInsight"></p>
                    </div>
                    
                    <div class="swot-matrix">
                        <div class="swot-row">
                            <div class="swot-cell strengths">
                                <h5>Strengths</h5>
                                <div id="strengthsList" class="swot-items"></div>
                            </div>
                            <div class="swot-cell weaknesses">
                                <h5>Weaknesses</h5>
                                <div id="weaknessesList" class="swot-items"></div>
                            </div>
                        </div>
                        <div class="swot-row">
                            <div class="swot-cell opportunities">
                                <h5>Opportunities</h5>
                                <div id="opportunitiesList" class="swot-items"></div>
                            </div>
                            <div class="swot-cell threats">
                                <h5>Threats</h5>
                                <div id="threatsList" class="swot-items"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="cross-strategies">
                        <h4>Cross-Quadrant Strategies</h4>
                        <div class="strategies-list" id="crossStrategiesList">
                            <!-- Filled dynamically -->
                        </div>
                    </div>
                </div>
                
                <div id="bcgResults" class="framework-results" style="display: none;">
                    <div class="results-header d-flex justify-content-between align-items-center">
                        <h3>BCG Growth-Share Matrix Analysis</h3>
                        <div class="actions">
                            <button class="btn btn-sm btn-outline-primary" id="bcgExportBtn">
                                <i data-lucide="download"></i> Export
                            </button>
                            <button class="btn btn-sm btn-outline-primary" id="bcgPrintBtn">
                                <i data-lucide="printer"></i> Print
                            </button>
                        </div>
                    </div>
                    
                    <div class="results-summary">
                        <div class="row">
                            <div class="col-md-8">
                                <h4>Portfolio Sustainability & Growth Analysis</h4>
                                <p class="insights-text" id="bcgMainInsight"></p>
                            </div>
                            <div class="col-md-4">
                                <div class="key-metrics-card">
                                    <h5>Portfolio Metrics</h5>
                                    <ul class="key-metrics-list" id="bcgMetricsList">
                                        <!-- Filled dynamically -->
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="results-visualization">
                        <h4>BCG Matrix</h4>
                        <div class="bcg-matrix" id="bcgMatrixVisualization">
                            <!-- Matrix visualization will be rendered here -->
                        </div>
                    </div>
                    
                    <div class="property-categories">
                        <h4>Property Category Analysis</h4>
                        <div class="table-responsive">
                            <table class="table table-hover" id="propertyCategories">
                                <thead>
                                    <tr>
                                        <th>Category</th>
                                        <th>Quadrant</th>
                                        <th>Market Growth</th>
                                        <th>Market Share</th>
                                        <th>Revenue</th>
                                        <th>Sustainability</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Filled dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="bcg-recommendations">
                        <h4>Portfolio Recommendations</h4>
                        <div class="recommendations-list" id="portfolioRecommendations">
                            <!-- Filled dynamically -->
                        </div>
                    </div>
                </div>
                
                <!-- McKinsey 9-Box Matrix Results -->
                <div id="mckinseyResults" class="framework-results" style="display: none;">
                    <div class="results-header d-flex justify-content-between align-items-center">
                        <h3>McKinsey 9-Box Matrix Analysis</h3>
                        <div class="actions">
                            <button class="btn btn-sm btn-outline-primary" id="mckinseyExportBtn">
                                <i data-lucide="download"></i> Export
                            </button>
                            <button class="btn btn-sm btn-outline-primary" id="mckinseyPrintBtn">
                                <i data-lucide="printer"></i> Print
                            </button>
                        </div>
                    </div>
                    
                    <div class="results-summary">
                        <h4>Portfolio Investment Strategy</h4>
                        <p class="insights-text" id="mckinseyMainInsight"></p>
                    </div>
                    
                    <div class="results-visualization">
                        <h4>McKinsey 9-Box Matrix</h4>
                        <div class="mckinsey-matrix" id="mckinseyMatrixVisualization">
                            <!-- Matrix visualization will be rendered here -->
                        </div>
                    </div>
                    
                    <div class="property-analysis">
                        <h4>Property Analysis</h4>
                        <div class="table-responsive">
                            <table class="table table-hover" id="propertyAnalysisTable">
                                <thead>
                                    <tr>
                                        <th>Property</th>
                                        <th>Market Attractiveness</th>
                                        <th>Competitive Position</th>
                                        <th>Box Position</th>
                                        <th>Size</th>
                                        <th>Sustainability ROI</th>
                                        <th>Strategy</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Filled dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="matrix-recommendations">
                        <h4>Investment Recommendations</h4>
                        <div class="recommendations-list" id="matrixRecommendations">
                            <!-- Filled dynamically -->
                        </div>
                    </div>
                </div>
                
                <!-- Strategy Pyramid Results -->
                <div id="strategyPyramidResults" class="framework-results" style="display: none;">
                    <div class="results-header d-flex justify-content-between align-items-center">
                        <h3>Strategy Pyramid Analysis</h3>
                        <div class="actions">
                            <button class="btn btn-sm btn-outline-primary" id="pyramidExportBtn">
                                <i data-lucide="download"></i> Export
                            </button>
                            <button class="btn btn-sm btn-outline-primary" id="pyramidPrintBtn">
                                <i data-lucide="printer"></i> Print
                            </button>
                        </div>
                    </div>
                    
                    <div class="results-summary">
                        <h4>Strategy Alignment Assessment</h4>
                        <div class="row">
                            <div class="col-md-8">
                                <div class="alignment-meter">
                                    <label>Overall Alignment</label>
                                    <div class="meter-scale">
                                        <div class="meter-fill" id="overallAlignmentValue"></div>
                                    </div>
                                    <div class="meter-labels">
                                        <span>Poor</span>
                                        <span>Moderate</span>
                                        <span>Strong</span>
                                    </div>
                                </div>
                                <p class="insights-text" id="pyramidMainInsight"></p>
                            </div>
                            <div class="col-md-4">
                                <div class="key-metrics-card">
                                    <h5>Alignment Scores</h5>
                                    <ul class="key-metrics-list" id="alignmentScoresList">
                                        <!-- Filled dynamically -->
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="results-visualization">
                        <h4>Strategy Pyramid</h4>
                        <div class="strategy-pyramid" id="strategyPyramidVisualization">
                            <!-- Pyramid visualization will be rendered here -->
                        </div>
                    </div>
                    
                    <div class="mission-objectives">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="pyramid-card mission-card">
                                    <h5>Mission</h5>
                                    <p id="missionStatement"></p>
                                    <div class="alignment-indicator">
                                        <span>Alignment:</span>
                                        <div class="indicator-dots" id="missionAlignment"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <h5>Key Objectives</h5>
                                <div class="objectives-list" id="objectivesList">
                                    <!-- Filled dynamically -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alignment-recommendations">
                        <h4>Alignment Recommendations</h4>
                        <div class="recommendations-list" id="alignmentRecommendations">
                            <!-- Filled dynamically -->
                        </div>
                    </div>
                </div>
                
                <!-- Blue Ocean Strategy Results -->
                <div id="blueOceanResults" class="framework-results" style="display: none;">
                    <div class="results-header d-flex justify-content-between align-items-center">
                        <h3>Blue Ocean Strategy Analysis</h3>
                        <div class="actions">
                            <button class="btn btn-sm btn-outline-primary" id="blueOceanExportBtn">
                                <i data-lucide="download"></i> Export
                            </button>
                            <button class="btn btn-sm btn-outline-primary" id="blueOceanPrintBtn">
                                <i data-lucide="printer"></i> Print
                            </button>
                        </div>
                    </div>
                    
                    <div class="results-summary">
                        <h4>Value Innovation Profile</h4>
                        <div class="row">
                            <div class="col-md-8">
                                <p class="insights-text" id="blueOceanMainInsight"></p>
                            </div>
                            <div class="col-md-4">
                                <div class="key-metrics-card">
                                    <h5>Value Innovation</h5>
                                    <ul class="key-metrics-list" id="valueInnovationMetrics">
                                        <!-- Filled dynamically -->
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="results-visualization">
                        <h4>Strategy Canvas</h4>
                        <div class="strategy-canvas" id="strategyCanvasVisualization">
                            <!-- Canvas visualization will be rendered here -->
                        </div>
                    </div>
                    
                    <div class="four-actions-framework">
                        <h4>Four Actions Framework</h4>
                        <div class="four-actions-grid">
                            <div class="action-box eliminate">
                                <h5>Eliminate</h5>
                                <div id="eliminateList" class="action-items">
                                    <!-- Filled dynamically -->
                                </div>
                            </div>
                            <div class="action-box reduce">
                                <h5>Reduce</h5>
                                <div id="reduceList" class="action-items">
                                    <!-- Filled dynamically -->
                                </div>
                            </div>
                            <div class="action-box raise">
                                <h5>Raise</h5>
                                <div id="raiseList" class="action-items">
                                    <!-- Filled dynamically -->
                                </div>
                            </div>
                            <div class="action-box create">
                                <h5>Create</h5>
                                <div id="createList" class="action-items">
                                    <!-- Filled dynamically -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="implementation-initiatives">
                        <h4>Implementation Initiatives</h4>
                        <div class="initiatives-list" id="implementationInitiatives">
                            <!-- Filled dynamically -->
                        </div>
                    </div>
                    
                    <div class="noncustomer-opportunities">
                        <h4>Non-Customer Opportunities</h4>
                        <div class="opportunities-list" id="nonCustomerOpportunities">
                            <!-- Filled dynamically -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='js/strategy-simulation.js') }}"></script>
{% endblock %}