{% extends "layouts/atomic_layout.html" %}

{% block title %}Advanced Search | SustainaTrendâ„¢{% endblock %}

{% block meta_description %}Search for sustainability insights, trends, and data across multiple sources with AI-powered accuracy.{% endblock %}

{% block head_extras %}
<style>
  .st-search-header {
    margin-bottom: 1.5rem;
  }
  
  .st-search-header__title {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 0.75rem;
  }
  
  .st-search-header__subtitle {
    color: var(--st-text-secondary);
    margin-bottom: 1.5rem;
  }
  
  .st-search-form {
    margin-bottom: 2rem;
  }
  
  .st-search-form__input-group {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1rem;
  }
  
  .st-search-form__input {
    flex: 1;
    padding: 0.75rem 1rem;
    border: 1px solid var(--st-border-color);
    border-radius: 0.375rem;
    font-size: 1rem;
  }
  
  .st-filter-bar {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 1rem;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--st-border-color);
  }
  
  .st-filter-select {
    padding: 0.5rem;
    border: 1px solid var(--st-border-color);
    border-radius: 0.375rem;
    background-color: var(--st-surface);
  }
  
  .st-search-results__count {
    font-size: 0.875rem;
    color: var(--st-text-secondary);
    margin-bottom: 1rem;
  }
  
  .st-search-result {
    padding: 1.25rem;
    border-radius: 0.5rem;
    background-color: var(--st-surface);
    border-left: 4px solid var(--st-primary);
    margin-bottom: 1rem;
    transition: all 0.2s ease;
  }
  
  .st-search-result:hover {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
  }
  
  .st-search-result__title {
    font-size: 1.125rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
  }
  
  .st-search-result__title a {
    color: var(--st-primary);
    text-decoration: none;
  }
  
  .st-search-result__title a:hover {
    text-decoration: underline;
  }
  
  .st-search-result__description {
    font-size: 0.9375rem;
    color: var(--st-text-primary);
    margin-bottom: 0.75rem;
  }
  
  .st-search-result__meta {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 1rem;
    font-size: 0.75rem;
    color: var(--st-text-secondary);
  }
  
  .st-search-highlight {
    background-color: rgba(var(--st-primary-rgb), 0.1);
    padding: 0 3px;
    border-radius: 3px;
  }
  
  .st-search-confidence {
    display: inline-block;
    padding: 0.125rem 0.5rem;
    border-radius: 1rem;
    font-size: 0.75rem;
    font-weight: 500;
  }
  
  .st-confidence-high {
    background-color: var(--st-success-light);
    color: var(--st-success);
  }
  
  .st-confidence-medium {
    background-color: var(--st-warning-light);
    color: var(--st-warning);
  }
  
  .st-confidence-low {
    background-color: var(--st-error-light);
    color: var(--st-error);
  }
  
  .st-search-type {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
  }
  
  .st-empty-results {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 3rem;
  }
  
  .st-empty-results__icon {
    font-size: 3rem;
    margin-bottom: 1rem;
    color: var(--st-border-color);
  }
  
  .st-empty-results__title {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
  }
  
  .st-empty-results__message {
    color: var(--st-text-secondary);
    max-width: 400px;
    margin-bottom: 1.5rem;
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .st-search-result {
    animation: fadeIn 0.3s ease-out;
  }
</style>
{% endblock %}

{% block left_column %}
<div class="st-card">
  <div class="st-card__header">
    <h2 class="st-card__title">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
      Search Options
    </h2>
  </div>
  <div class="st-card__body">
    <form class="st-filter-form">
      <div class="st-filter-group">
        <label class="st-filter-label">Content Type</label>
        <div class="st-checkbox-group">
          <label class="st-checkbox">
            <input type="checkbox" checked> Reports
          </label>
          <label class="st-checkbox">
            <input type="checkbox" checked> Articles
          </label>
          <label class="st-checkbox">
            <input type="checkbox" checked> News
          </label>
          <label class="st-checkbox">
            <input type="checkbox" checked> Research
          </label>
          <label class="st-checkbox">
            <input type="checkbox" checked> Data
          </label>
        </div>
      </div>
      
      <div class="st-filter-group">
        <label class="st-filter-label">Topics</label>
        <div class="st-checkbox-group">
          <label class="st-checkbox">
            <input type="checkbox" checked> Carbon Emissions
          </label>
          <label class="st-checkbox">
            <input type="checkbox" checked> Energy
          </label>
          <label class="st-checkbox">
            <input type="checkbox" checked> Water
          </label>
          <label class="st-checkbox">
            <input type="checkbox" checked> Waste
          </label>
          <label class="st-checkbox">
            <input type="checkbox" checked> Social
          </label>
          <label class="st-checkbox">
            <input type="checkbox" checked> Governance
          </label>
        </div>
      </div>
      
      <div class="st-filter-group">
        <label class="st-filter-label">Time Period</label>
        <select class="st-select st-w-100">
          <option selected>Any time</option>
          <option>Past 24 hours</option>
          <option>Past week</option>
          <option>Past month</option>
          <option>Past year</option>
        </select>
      </div>
      
      <div class="st-filter-group">
        <label class="st-filter-label">Search Model</label>
        <select class="st-select st-w-100">
          <option selected>Hybrid</option>
          <option>Vector</option>
          <option>Keyword</option>
          <option>Real-time</option>
          <option>RAG</option>
        </select>
      </div>
      
      <button type="button" class="st-button st-button--outline st-w-100 st-mt-3">Apply Filters</button>
    </form>
  </div>
</div>

<div class="st-card">
  <div class="st-card__header">
    <h2 class="st-card__title">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/></svg>
      Recent Searches
    </h2>
  </div>
  <div class="st-card__body">
    <div class="st-recent-searches">
      <a href="#" class="st-recent-search-item">
        <div class="st-recent-search-item__query">Carbon reduction technologies</div>
        <div class="st-recent-search-item__time">20 minutes ago</div>
      </a>
      <a href="#" class="st-recent-search-item">
        <div class="st-recent-search-item__query">Water conservation best practices</div>
        <div class="st-recent-search-item__time">Yesterday</div>
      </a>
      <a href="#" class="st-recent-search-item">
        <div class="st-recent-search-item__query">ESG reporting frameworks</div>
        <div class="st-recent-search-item__time">2 days ago</div>
      </a>
      <a href="#" class="st-recent-search-item">
        <div class="st-recent-search-item__query">Renewable energy trends 2025</div>
        <div class="st-recent-search-item__time">Last week</div>
      </a>
    </div>
  </div>
</div>
{% endblock %}

{% block center_column %}
<div class="st-search-header">
  <h1 class="st-search-header__title">Advanced Sustainability Search</h1>
  <p class="st-search-header__subtitle">Search across sustainability data, reports, articles, and research with our AI-powered search engine.</p>
  
  <form class="st-search-form" action="/search-atomic" method="get">
    <div class="st-search-form__input-group">
      <input type="text" name="q" class="st-search-form__input" placeholder="Search for sustainability topics, metrics, or trends..." value="{{ query }}">
      <button type="submit" class="st-button">Search</button>
    </div>
  </form>
  
  {% if query %}
  <div class="st-filter-bar">
    <span>Filter by:</span>
    <select class="st-filter-select">
      <option selected>All Sources</option>
      <option>Research Papers</option>
      <option>News Articles</option>
      <option>Corporate Reports</option>
      <option>Industry Publications</option>
      <option>Government Sources</option>
    </select>
    
    <select class="st-filter-select">
      <option selected>All Time</option>
      <option>Last 24 Hours</option>
      <option>Last Week</option>
      <option>Last Month</option>
      <option>Last Year</option>
    </select>
    
    <select class="st-filter-select">
      <option selected>Relevance</option>
      <option>Date (Newest)</option>
      <option>Date (Oldest)</option>
      <option>Source</option>
    </select>
  </div>
  
  <div class="st-search-results">
    <div class="st-search-results__count">
      Showing results for "<strong>{{ query }}</strong>"
    </div>
    
    {% if query %}
    <!-- Sample search results - In a real implementation, these would be generated dynamically -->
    <div class="st-search-result">
      <h3 class="st-search-result__title">
        <a href="#">Emerging <span class="st-search-highlight">Sustainability</span> Technologies for Carbon Reduction</a>
      </h3>
      <p class="st-search-result__description">
        New technologies for carbon capture and <span class="st-search-highlight">sustainability</span> management are emerging as key solutions for businesses aiming to reduce their environmental impact and meet regulatory requirements.
      </p>
      <div class="st-search-result__meta">
        <span class="st-search-type">
          <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
          Research Report
        </span>
        <span>Mar 1, 2025</span>
        <span>Source: ClimateScience Journal</span>
        <span class="st-search-confidence st-confidence-high">92% Relevance</span>
      </div>
    </div>
    
    <div class="st-search-result">
      <h3 class="st-search-result__title">
        <a href="#">ESG Reporting Standards: A <span class="st-search-highlight">Sustainability</span> Framework Comparison</a>
      </h3>
      <p class="st-search-result__description">
        This comprehensive guide compares leading environmental, social, and governance (ESG) frameworks, analyzing how they address key <span class="st-search-highlight">sustainability</span> reporting requirements for different industries.
      </p>
      <div class="st-search-result__meta">
        <span class="st-search-type">
          <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
          Article
        </span>
        <span>Feb 15, 2025</span>
        <span>Source: Sustainability Today</span>
        <span class="st-search-confidence st-confidence-high">89% Relevance</span>
      </div>
    </div>
    
    <div class="st-search-result">
      <h3 class="st-search-result__title">
        <a href="#">Water Conservation Strategies for Corporate <span class="st-search-highlight">Sustainability</span></a>
      </h3>
      <p class="st-search-result__description">
        Innovative water management approaches are becoming a critical component of corporate <span class="st-search-highlight">sustainability</span> strategies, with companies implementing advanced conservation technologies.
      </p>
      <div class="st-search-result__meta">
        <span class="st-search-type">
          <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.44 11.05-9.19 9.19a6 6 0 0 1-8.48-8.48l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/></svg>
          Case Study
        </span>
        <span>Feb 8, 2025</span>
        <span>Source: Water Resources Institute</span>
        <span class="st-search-confidence st-confidence-medium">78% Relevance</span>
      </div>
    </div>
    
    <div class="st-search-result">
      <h3 class="st-search-result__title">
        <a href="#">Supply Chain <span class="st-search-highlight">Sustainability</span>: Measuring Environmental Impact</a>
      </h3>
      <p class="st-search-result__description">
        Organizations are increasingly focusing on <span class="st-search-highlight">sustainability</span> across their supply chains, implementing new measurement tools and methodologies to track environmental performance.
      </p>
      <div class="st-search-result__meta">
        <span class="st-search-type">
          <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>
          News
        </span>
        <span>Jan 22, 2025</span>
        <span>Source: Supply Chain Weekly</span>
        <span class="st-search-confidence st-confidence-medium">76% Relevance</span>
      </div>
    </div>
    
    <div class="st-search-result">
      <h3 class="st-search-result__title">
        <a href="#">Renewable Energy Trends Shaping Corporate <span class="st-search-highlight">Sustainability</span></a>
      </h3>
      <p class="st-search-result__description">
        The latest trends in renewable energy adoption are transforming how companies approach <span class="st-search-highlight">sustainability</span> goals, with increasing investment in solar, wind, and energy storage technologies.
      </p>
      <div class="st-search-result__meta">
        <span class="st-search-type">
          <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
          Industry Report
        </span>
        <span>Jan 5, 2025</span>
        <span>Source: Energy Future Institute</span>
        <span class="st-search-confidence st-confidence-high">85% Relevance</span>
      </div>
    </div>
    {% else %}
    <div class="st-empty-results">
      <div class="st-empty-results__icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
      </div>
      <h2 class="st-empty-results__title">Enter a search query</h2>
      <p class="st-empty-results__message">Start by typing a search term above to find sustainability insights, trends, and data.</p>
    </div>
    {% endif %}
  </div>
  {% endif %}
</div>
{% endblock %}

{% block right_column %}
<div class="st-card">
  <div class="st-card__header">
    <h2 class="st-card__title">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
      Popular Topics
    </h2>
  </div>
  <div class="st-card__body">
    <div class="st-tag-cloud">
      <a href="#" class="st-tag st-tag--lg">Carbon Reduction</a>
      <a href="#" class="st-tag">ESG Reporting</a>
      <a href="#" class="st-tag st-tag--sm">Renewable Energy</a>
      <a href="#" class="st-tag">Net Zero</a>
      <a href="#" class="st-tag st-tag--sm">Water Conservation</a>
      <a href="#" class="st-tag">Circular Economy</a>
      <a href="#" class="st-tag st-tag--sm">Biodiversity</a>
      <a href="#" class="st-tag">Supply Chain</a>
      <a href="#" class="st-tag st-tag--sm">Climate Risk</a>
      <a href="#" class="st-tag">Social Impact</a>
    </div>
  </div>
</div>

{% if query %}
<div class="st-card">
  <div class="st-card__header">
    <h2 class="st-card__title">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
      AI Insights
    </h2>
  </div>
  <div class="st-card__body">
    <div class="st-ai-insights">
      <h3 class="st-ai-insights__title">Context for "{{ query }}"</h3>
      <p class="st-ai-insights__text">
        Sustainability is a critical focus for organizations seeking to minimize environmental impact while maintaining business viability. Current research emphasizes measuring and reducing carbon footprints, implementing circular economy principles, and reporting using standardized ESG frameworks.
      </p>
      
      <h4 class="st-ai-insights__subtitle">Key Aspects</h4>
      <ul class="st-ai-insights__list">
        <li>Carbon emissions measurement and reduction strategies</li>
        <li>Resource conservation and circular economy approaches</li>
        <li>Social impact and governance considerations</li>
        <li>Regulatory compliance and voluntary reporting standards</li>
      </ul>
      
      <h4 class="st-ai-insights__subtitle">Related Topics</h4>
      <div class="st-tag-cloud st-mt-2">
        <a href="#" class="st-tag st-tag--sm">Carbon Neutrality</a>
        <a href="#" class="st-tag st-tag--sm">ESG Reporting</a>
        <a href="#" class="st-tag st-tag--sm">Renewable Energy</a>
        <a href="#" class="st-tag st-tag--sm">CSRD</a>
        <a href="#" class="st-tag st-tag--sm">SDGs</a>
      </div>
    </div>
  </div>
</div>
{% endif %}

<div class="st-card">
  <div class="st-card__header">
    <h2 class="st-card__title">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>
      Search Tips
    </h2>
  </div>
  <div class="st-card__body">
    <div class="st-tips-list">
      <div class="st-tip-item">
        <div class="st-tip-item__title">Use specific terms</div>
        <div class="st-tip-item__description">The more specific your search terms, the more relevant your results will be.</div>
      </div>
      
      <div class="st-tip-item">
        <div class="st-tip-item__title">Try quotation marks</div>
        <div class="st-tip-item__description">Use quotes around phrases for exact matches, e.g., "carbon reduction strategies".</div>
      </div>
      
      <div class="st-tip-item">
        <div class="st-tip-item__title">Filter by source type</div>
        <div class="st-tip-item__description">Use the source filters to focus on particular types of content like research papers or news articles.</div>
      </div>
      
      <div class="st-tip-item">
        <div class="st-tip-item__title">Try different search models</div>
        <div class="st-tip-item__description">Our different search models (Hybrid, Vector, RAG) offer varying approaches to finding relevant content.</div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/atomic-core.js') }}"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Any search-specific functionality would be initialized here
    
    // Example: Highlight search terms in results (in a real implementation)
    function highlightSearchTerms() {
      // This function would dynamically highlight search terms based on the query
      console.log('Search term highlighting initialized');
    }
    
    // Initialize search functionality
    highlightSearchTerms();
  });
</script>
{% endblock %}