<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Hub | Regulatory AI</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Chart.js for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/strategy-hub.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/document-hub-redesign.css') }}">
    
    <!-- Finchat Dark Theme Base Styles -->
    <style>
        :root {
            /* Color Variables */
            --fc-bg-primary: #121212;
            --fc-bg-secondary: #1a1a1a;
            --fc-bg-tertiary: #222222;
            --fc-bg-hover: #2a2a2a;
            --fc-bg-card: #1d1d1d;
            --primary-rgb: 61, 213, 152;  /* #3dd598 - Green */
            --fc-primary: rgb(var(--primary-rgb));
            --fc-primary-hover: rgba(var(--primary-rgb), 0.9);
            --fc-primary-light: rgba(var(--primary-rgb), 0.15);
            --fc-positive: #3dd598;
            --fc-negative: #ff6b81;
            --fc-warning: #ffad63;
            --fc-info: #34c3ff;
            --fc-text-primary: #e4e6eb;
            --fc-text-secondary: #a0a0a0;
            --fc-text-muted: #666666;
            --fc-border: #333333;
            --fc-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            --fc-radius: 4px;
            --fc-radius-lg: 8px;
            
            /* Spacing Variables */
            --fc-spacing-xs: 4px;
            --fc-spacing-sm: 8px;
            --fc-spacing-md: 16px;
            --fc-spacing-lg: 24px;
            --fc-spacing-xl: 32px;
            
            /* Sidebar Width */
            --fc-sidebar-width: 240px;
            --fc-sidebar-collapsed-width: 60px;
            --fc-insights-width: 320px;
        }
        
        /* Reset & Base Styles */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--fc-bg-primary);
            color: var(--fc-text-primary);
            line-height: 1.5;
            font-size: 14px;
            overflow-x: hidden;
            height: 100vh;
            display: grid;
            grid-template-columns: var(--fc-sidebar-width) 1fr;
            grid-template-rows: auto 1fr;
            grid-template-areas:
                "sidebar header"
                "sidebar content";
        }
        
        body.insights-open {
            grid-template-columns: var(--fc-sidebar-width) 1fr var(--fc-insights-width);
            grid-template-areas:
                "sidebar header header"
                "sidebar content insights";
        }
        
        body.sidebar-collapsed {
            grid-template-columns: var(--fc-sidebar-collapsed-width) 1fr;
        }
        
        body.sidebar-collapsed.insights-open {
            grid-template-columns: var(--fc-sidebar-collapsed-width) 1fr var(--fc-insights-width);
        }
        
        a {
            color: var(--fc-primary);
            text-decoration: none;
            transition: color 0.2s;
        }
        
        a:hover {
            color: var(--fc-primary-hover);
            text-decoration: none;
        }
        
        .finchat-header {
            grid-area: header;
            background-color: var(--fc-bg-secondary);
            border-bottom: 1px solid var(--fc-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 var(--fc-spacing-lg);
            height: 60px;
        }
        
        .finchat-header-title {
            font-size: 1.1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: var(--fc-spacing-sm);
        }
        
        .finchat-header-actions {
            display: flex;
            align-items: center;
            gap: var(--fc-spacing-md);
        }
        
        /* Sidebar Styles */
        .finchat-sidebar {
            grid-area: sidebar;
            background-color: var(--fc-bg-secondary);
            border-right: 1px solid var(--fc-border);
            display: flex;
            flex-direction: column;
            height: 100vh;
            position: fixed;
            width: var(--fc-sidebar-width);
            transition: width 0.3s;
            z-index: 20;
        }
        
        body.sidebar-collapsed .finchat-sidebar {
            width: var(--fc-sidebar-collapsed-width);
        }
        
        .finchat-logo {
            display: flex;
            align-items: center;
            gap: var(--fc-spacing-sm);
            padding: var(--fc-spacing-md);
            border-bottom: 1px solid var(--fc-border);
            height: 60px;
        }
        
        .finchat-logo-icon {
            font-size: 1.4rem;
            color: var(--fc-primary);
        }
        
        .finchat-logo-text {
            font-weight: 700;
            font-size: 1.1rem;
            white-space: nowrap;
            opacity: 1;
            transition: opacity 0.3s;
        }
        
        body.sidebar-collapsed .finchat-logo-text {
            opacity: 0;
            width: 0;
            overflow: hidden;
        }
        
        .finchat-nav {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            overflow-y: auto;
            padding: var(--fc-spacing-md) 0;
        }
        
        .finchat-nav-section {
            margin-bottom: var(--fc-spacing-md);
        }
        
        .finchat-nav-header {
            font-size: 0.7rem;
            text-transform: uppercase;
            color: var(--fc-text-muted);
            letter-spacing: 0.5px;
            padding: var(--fc-spacing-xs) var(--fc-spacing-md);
            margin-bottom: var(--fc-spacing-xs);
        }
        
        body.sidebar-collapsed .finchat-nav-header {
            opacity: 0;
            height: 0;
            overflow: hidden;
            margin: 0;
            padding: 0;
        }
        
        .finchat-nav-item {
            display: flex;
            align-items: center;
            padding: var(--fc-spacing-xs) var(--fc-spacing-md);
            color: var(--fc-text-secondary);
            border-left: 2px solid transparent;
            transition: all 0.2s;
        }
        
        .finchat-nav-item:hover {
            background-color: var(--fc-bg-hover);
            color: var(--fc-text-primary);
            text-decoration: none;
        }
        
        .finchat-nav-item.active {
            color: var(--fc-primary);
            border-left-color: var(--fc-primary);
            background-color: var(--fc-bg-hover);
        }
        
        .finchat-nav-icon {
            width: 24px;
            text-align: center;
            margin-right: var(--fc-spacing-sm);
        }
        
        body.sidebar-collapsed .finchat-nav-icon {
            margin-right: 0;
        }
        
        .finchat-nav-text {
            opacity: 1;
            transition: opacity 0.3s;
            white-space: nowrap;
        }
        
        body.sidebar-collapsed .finchat-nav-text {
            opacity: 0;
            width: 0;
            overflow: hidden;
        }
        
        .finchat-sidebar-toggle {
            padding: var(--fc-spacing-md);
            display: flex;
            justify-content: flex-end;
            margin-top: auto;
            color: var(--fc-text-secondary);
            cursor: pointer;
            border-top: 1px solid var(--fc-border);
        }
        
        .finchat-sidebar-toggle:hover {
            color: var(--fc-text-primary);
        }
    .document-hub-main {
        grid-area: content;
        overflow-y: auto;
        padding: var(--fc-spacing-lg);
        background-color: var(--fc-bg-primary);
    }
    
    .document-hub-tabs {
        display: flex;
        background-color: var(--fc-bg-secondary);
        border-radius: var(--fc-radius);
        margin-bottom: var(--fc-spacing-lg);
        box-shadow: var(--fc-shadow);
        overflow: hidden;
    }
    
    .tab {
        flex: 1;
        text-align: center;
        padding: 15px 0;
        cursor: pointer;
        font-weight: 600;
        border-bottom: 3px solid transparent;
        transition: all 0.3s ease;
        color: var(--fc-text-secondary);
    }
    
    .tab:hover {
        background-color: var(--fc-bg-hover);
        color: var(--fc-text-primary);
    }
    
    .tab.active {
        color: var(--fc-primary);
        border-bottom-color: var(--fc-primary);
        background-color: var(--fc-bg-hover);
    }
    
    .tab-content {
        background-color: var(--fc-bg-secondary);
        border-radius: var(--fc-radius-lg);
        padding: var(--fc-spacing-lg);
        display: none;
        box-shadow: var(--fc-shadow);
    }
    
    .tab-content.active {
        display: block;
        animation: fadeIn 0.5s ease forwards;
    }
    
    .upload-container {
        max-width: 800px;
        margin: 0 auto;
    }
    
    .upload-header h2 {
        color: var(--fc-text-primary);
    }
    
    .upload-header p {
        color: var(--fc-text-secondary);
    }
    
    .upload-area {
        background-color: var(--fc-bg-tertiary);
        border: 2px dashed var(--fc-border);
    }
    
    .upload-area:hover, .upload-area.dragover {
        border-color: var(--fc-primary);
        background-color: rgba(var(--primary-rgb), 0.05);
    }
    
    .upload-icon {
        color: var(--fc-primary);
    }
    
    .upload-button, .next-button, .submit-btn {
        background-color: var(--fc-primary);
        color: var(--fc-bg-primary);
    }
    
    .upload-button:hover, .next-button:hover, .submit-btn:hover {
        background-color: var(--fc-primary-hover);
    }
    
    .ethical-ai-notice {
        background-color: rgba(var(--primary-rgb), 0.05);
        border-left: 4px solid var(--fc-primary);
    }
    
    .ethical-ai-notice h5 {
        color: var(--fc-primary);
    }
    
    .badge-csrd, .badge-esrs, .badge-sfdr, .badge-tcfd {
        background-color: var(--fc-bg-tertiary);
        color: var(--fc-text-primary);
        border: 1px solid var(--fc-border);
    }
    
    /* Making the document hub content responsive to sidebar state */
    body.sidebar-collapsed .document-hub-main {
        margin-left: var(--fc-sidebar-collapsed-width);
    }
    
    /* Right sidebar / insights panel styles */
    .finchat-insights {
        grid-area: insights;
        background-color: var(--fc-bg-secondary);
        border-left: 1px solid var(--fc-border);
        padding: var(--fc-spacing-lg);
        overflow-y: auto;
        width: 320px;
        position: fixed;
        right: 0;
        top: 60px;
        bottom: 0;
        z-index: 10;
    }
    
    .insights-section {
        margin-bottom: var(--fc-spacing-lg);
    }
    
    .insights-section-header {
        margin-bottom: var(--fc-spacing-md);
        border-bottom: 1px solid var(--fc-border);
        padding-bottom: var(--fc-spacing-sm);
    }
    
    .insights-section-title {
        font-size: 1.1rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 0.25rem;
    }
    
    .insights-section-title i {
        color: var(--fc-primary);
    }
    
    .insights-section-description {
        font-size: 0.8rem;
        color: var(--fc-text-secondary);
    }
    
    /* Regulatory timeline specific styles for right sidebar */
    .timeline-container-right {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }
    
    .timeline-event-right {
        background-color: var(--fc-bg-tertiary);
        border-radius: var(--fc-radius);
        padding: 1rem;
        position: relative;
        border-left: 4px solid var(--fc-primary);
    }
    
    .timeline-event-right.high-impact {
        border-left-color: var(--fc-negative);
    }
    
    .timeline-event-right.medium-impact {
        border-left-color: var(--fc-warning);
    }
    
    .timeline-event-right.low-impact {
        border-left-color: var(--fc-info);
    }
    
    .timeline-date-right {
        font-size: 0.8rem;
        font-weight: 700;
        margin-bottom: 0.25rem;
        color: var(--fc-primary);
    }
    
    .timeline-event-right.high-impact .timeline-date-right {
        color: var(--fc-negative);
    }
    
    .timeline-event-right.medium-impact .timeline-date-right {
        color: var(--fc-warning);
    }
    
    .timeline-event-right.low-impact .timeline-date-right {
        color: var(--fc-info);
    }
    
    .timeline-event-right h6 {
        font-size: 0.9rem;
        font-weight: 600;
        margin-bottom: 0.25rem;
    }
    
    .timeline-event-right p {
        font-size: 0.8rem;
        color: var(--fc-text-secondary);
        margin: 0;
    }
    
    /* Document statistics in right sidebar */
    .insights-stats {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0.75rem;
    }
    
    .insights-stat-item {
        background-color: var(--fc-bg-tertiary);
        border-radius: var(--fc-radius);
        padding: 0.75rem;
        text-align: center;
    }
    
    .stat-label {
        font-size: 0.7rem;
        font-weight: 500;
        color: var(--fc-text-secondary);
        margin-bottom: 0.25rem;
    }
    
    .stat-value {
        font-size: 1rem;
        font-weight: 700;
        color: var(--fc-text-primary);
    }
    
    /* Main content with right sidebar */
    .document-hub-content.insights-open {
        margin-right: 320px;
    }
    
    @media (max-width: 768px) {
        .document-hub-main {
            margin-left: 0;
        }
        
        .finchat-insights {
            display: none;
        }
        
        .document-hub-content.insights-open {
            margin-right: 0;
        }
    }
</style>
</head>

<body class="insights-open finchat-dark-theme">
    <!-- Sidebar -->
    <div class="finchat-sidebar">
        <div class="finchat-logo">
            <div class="finchat-logo-icon">
                <i class="fas fa-leaf"></i>
            </div>
            <div class="finchat-logo-text">SustainaTrend™</div>
        </div>
        
        <nav class="finchat-nav">
            <div class="finchat-nav-section">
                <div class="finchat-nav-header">Platform</div>
                
                <a href="/dashboard" class="finchat-nav-item">
                    <div class="finchat-nav-icon"><i class="fas fa-tachometer-alt"></i></div>
                    <div class="finchat-nav-text">Dashboard</div>
                </a>
                
                <a href="/performance" class="finchat-nav-item">
                    <div class="finchat-nav-icon"><i class="fas fa-chart-bar"></i></div>
                    <div class="finchat-nav-text">Performance</div>
                </a>
                
                <a href="/overview" class="finchat-nav-item">
                    <div class="finchat-nav-icon"><i class="fas fa-compass"></i></div>
                    <div class="finchat-nav-text">Overview</div>
                </a>
            </div>
            
            <div class="finchat-nav-section">
                <div class="finchat-nav-header">Intelligence</div>
                
                <a href="/trend-analysis" class="finchat-nav-item">
                    <div class="finchat-nav-icon"><i class="fas fa-chart-line"></i></div>
                    <div class="finchat-nav-text">Trend Analysis</div>
                </a>
                
                <a href="/enhanced-strategy/" class="finchat-nav-item">
                    <div class="finchat-nav-icon"><i class="fas fa-lightbulb"></i></div>
                    <div class="finchat-nav-text">Strategy Hub</div>
                </a>
                
                <a href="/documents/document-upload" class="finchat-nav-item active">
                    <div class="finchat-nav-icon"><i class="fas fa-file-alt"></i></div>
                    <div class="finchat-nav-text">Documents</div>
                </a>
                
                <a href="/search" class="finchat-nav-item">
                    <div class="finchat-nav-icon"><i class="fas fa-search"></i></div>
                    <div class="finchat-nav-text">Search</div>
                </a>
            </div>
            
            <div class="finchat-nav-section">
                <div class="finchat-nav-header">Tools</div>
                
                <a href="/science-based-targets" class="finchat-nav-item">
                    <div class="finchat-nav-icon"><i class="fas fa-bullseye"></i></div>
                    <div class="finchat-nav-text">Science-Based Targets</div>
                </a>
                
                <a href="/data-moat" class="finchat-nav-item">
                    <div class="finchat-nav-icon"><i class="fas fa-shield-alt"></i></div>
                    <div class="finchat-nav-text">Data Moat</div>
                </a>
            </div>
        </nav>
        
        <div class="finchat-sidebar-toggle" id="toggleSidebar">
            <i class="fas fa-chevron-left"></i>
        </div>
    </div>
    
    <!-- Header -->
    <header class="finchat-header">
        <div class="finchat-header-title">
            <i class="fas fa-file-alt"></i>
            <span>Document Hub | Regulatory AI</span>
        </div>
        
        <div class="finchat-header-actions">
            <button class="finchat-button-icon" id="toggleInsights">
                <i class="fas fa-info-circle"></i>
            </button>
        </div>
    </header>
    
    <div class="document-hub-main">

  <!-- Navigation tabs -->
  <div class="document-hub-tabs">
    <div class="tab active" data-tab="upload">Upload</div>
    <div class="tab" data-tab="analyze">Analyze</div>
    <div class="tab" data-tab="insights">View Insights</div>
  </div>

  <!-- Main content area -->
  <div class="document-hub-content">
    <!-- Upload tab content -->
    <div class="tab-content active" id="upload-tab">
      
      <div class="upload-container">
        <div class="upload-header">
          <h2>Upload Sustainability Document</h2>
          <p>Upload your CSRD, ESG, or sustainability report for AI-powered analysis</p>
        </div>
        
        <div class="upload-area" id="drop-area">
          <div class="upload-icon">
            <i class="fas fa-file-upload"></i>
          </div>
          <p class="upload-text">Drag and drop your file here</p>
          <p class="upload-text-small">or</p>
          <button type="button" class="upload-button" id="browse-btn">Choose File</button>
          <input type="file" id="file-input" name="document" accept=".pdf,.docx,.txt" hidden>
          <p class="file-info">Supported formats: PDF, DOCX, TXT (max 20MB)</p>
        </div>
        
        <div class="file-preview" id="file-preview">
          <div class="file-preview-content">
            <i class="fas fa-file-pdf file-icon"></i>
            <div class="file-details">
              <p class="file-name" id="selected-file-name">No file selected</p>
              <p class="file-size" id="selected-file-size"></p>
            </div>
            <button class="remove-file" id="remove-file">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="upload-actions">
            <button class="upload-submit" id="upload-submit">Upload Document</button>
            <div class="upload-options">
              <button class="text-paste-btn" id="text-paste-btn">
                <i class="fas fa-paste"></i> Paste Text
              </button>
            </div>
          </div>
        </div>

        <!-- Upload progress -->
        <div class="upload-progress" id="upload-progress">
          <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
          </div>
          <p class="progress-text">Uploading... <span id="progress-percentage">0%</span></p>
        </div>

        <!-- Upload success state -->
        <div class="upload-success" id="upload-success">
          <div class="success-icon">
            <i class="fas fa-check-circle"></i>
          </div>
          <h3>Upload Complete!</h3>
          <p>Your document has been successfully uploaded.</p>
          <button class="next-button" id="to-analyze-btn">Continue to Analysis</button>
        </div>

        <!-- Upload error state -->
        <div class="upload-error" id="upload-error">
          <div class="error-icon">
            <i class="fas fa-exclamation-circle"></i>
          </div>
          <h3>Upload Failed</h3>
          <p id="error-message">An error occurred while uploading your document.</p>
          <button class="retry-button" id="retry-upload">Try Again</button>
        </div>

        <!-- Framework support info -->
        <div class="supported-frameworks">
          <h4>Supported Frameworks</h4>
          <div class="framework-badges">
            <div class="framework-badge">
              <span class="badge badge-csrd">CSRD</span>
              <span class="badge-tooltip">Corporate Sustainability Reporting Directive</span>
            </div>
            <div class="framework-badge">
              <span class="badge badge-esrs">ESRS</span>
              <span class="badge-tooltip">European Sustainability Reporting Standards</span>
            </div>
            <div class="framework-badge">
              <span class="badge badge-sfdr">SFDR</span>
              <span class="badge-tooltip">Sustainable Finance Disclosure Regulation</span>
            </div>
            <div class="framework-badge">
              <span class="badge badge-tcfd">TCFD</span>
              <span class="badge-tooltip">Task Force on Climate-related Financial Disclosures</span>
            </div>
            <div class="framework-badge">
              <span class="badge badge-sasb">SASB</span>
              <span class="badge-tooltip">Sustainability Accounting Standards Board</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Analyze tab content -->
    <div class="tab-content" id="analyze-tab">
      <div class="analyze-container">
        <div class="analyze-header">
          <h2>Document Analysis</h2>
          <p id="analyzing-document-name">Analyzing your document using Regulatory AI</p>
        </div>

        <div class="analysis-progress-container">
          <div class="analysis-steps">
            <div class="analysis-step" id="step-extraction">
              <div class="step-icon">
                <i class="fas fa-file-alt"></i>
              </div>
              <div class="step-details">
                <h4>Text Extraction</h4>
                <p>Extracting content from document</p>
              </div>
              <div class="step-status pending">
                <span class="status-dot"></span>
              </div>
            </div>

            <div class="analysis-step" id="step-processing">
              <div class="step-icon">
                <i class="fas fa-cogs"></i>
              </div>
              <div class="step-details">
                <h4>Content Processing</h4>
                <p>Processing textual content</p>
              </div>
              <div class="step-status">
                <span class="status-dot"></span>
              </div>
            </div>

            <div class="analysis-step" id="step-assessment">
              <div class="step-icon">
                <i class="fas fa-tasks"></i>
              </div>
              <div class="step-details">
                <h4>Framework Assessment</h4>
                <p>Evaluating against sustainability frameworks</p>
              </div>
              <div class="step-status">
                <span class="status-dot"></span>
              </div>
            </div>

            <div class="analysis-step" id="step-insights">
              <div class="step-icon">
                <i class="fas fa-chart-line"></i>
              </div>
              <div class="step-details">
                <h4>Generating Insights</h4>
                <p>Creating actionable sustainability insights</p>
              </div>
              <div class="step-status">
                <span class="status-dot"></span>
              </div>
            </div>
          </div>

          <div class="progress-messages" id="progress-messages">
            <div class="message-container">
              <div class="message">Starting document analysis...</div>
            </div>
          </div>

          <!-- Analysis progress bar -->
          <div class="analysis-progress-bar">
            <div class="analysis-progress-fill" id="analysis-progress-fill"></div>
          </div>
          <p class="analysis-progress-text">Analysis in progress... <span id="analysis-percentage">0%</span></p>

          <button class="cancel-button" id="cancel-analysis">Cancel Analysis</button>
        </div>

        <!-- Analysis complete -->
        <div class="analysis-complete" id="analysis-complete">
          <div class="success-icon">
            <i class="fas fa-check-circle"></i>
          </div>
          <h3>Analysis Complete</h3>
          <p>Your document has been successfully analyzed.</p>
          <button class="next-button" id="to-insights-btn">View Insights</button>
        </div>
      </div>
    </div>

    <!-- Insights tab content -->
    <div class="tab-content" id="insights-tab">
      <div class="insights-container">
        <div class="insights-header">
          <h2>Sustainability Insights</h2>
          <p id="document-insights-name">Insights from your document</p>
        </div>

        <div class="insights-dashboard">
          <!-- Main content and sidebar layout -->
          <div class="insights-layout">
            <!-- Main content area -->
            <div class="insights-main">
              <div class="insights-summary-card">
                <h3>Executive Summary</h3>
                <div class="summary-content" id="executive-summary">
                  <p>This document demonstrates strong alignment with CSRD requirements, with comprehensive coverage of environmental metrics and governance disclosures. There are opportunities to strengthen social impact reporting and improve quantitative target setting for biodiversity impacts.</p>
                </div>
              </div>

              <div class="compliance-overview">
                <h3>Framework Compliance</h3>
                <div class="compliance-cards">
                  <div class="compliance-card">
                    <div class="compliance-header">
                      <span class="framework-name">CSRD</span>
                      <span class="compliance-score high">85%</span>
                    </div>
                    <div class="compliance-bar">
                      <div class="compliance-fill" style="width: 85%; background-color: var(--fc-positive);"></div>
                    </div>
                  </div>

                  <div class="compliance-card">
                    <div class="compliance-header">
                      <span class="framework-name">ESRS</span>
                      <span class="compliance-score medium">72%</span>
                    </div>
                    <div class="compliance-bar">
                      <div class="compliance-fill" style="width: 72%; background-color: var(--fc-warning);"></div>
                    </div>
                  </div>

                  <div class="compliance-card">
                    <div class="compliance-header">
                      <span class="framework-name">TCFD</span>
                      <span class="compliance-score high">88%</span>
                    </div>
                    <div class="compliance-bar">
                      <div class="compliance-fill" style="width: 88%; background-color: var(--fc-positive);"></div>
                    </div>
                  </div>

                  <div class="compliance-card">
                    <div class="compliance-header">
                      <span class="framework-name">SFDR</span>
                      <span class="compliance-score low">58%</span>
                    </div>
                    <div class="compliance-bar">
                      <div class="compliance-fill" style="width: 58%; background-color: var(--fc-negative);"></div>
                    </div>
                  </div>

                  <div class="compliance-card">
                    <div class="compliance-header">
                      <span class="framework-name">SASB</span>
                      <span class="compliance-score medium">76%</span>
                    </div>
                    <div class="compliance-bar">
                      <div class="compliance-fill" style="width: 76%; background-color: var(--fc-warning);"></div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="key-metrics">
                <h3>Key Sustainability Metrics</h3>
                <div class="metrics-grid">
                  <div class="metric-card">
                    <div class="metric-icon">
                      <i class="fas fa-cloud"></i>
                    </div>
                    <div class="metric-details">
                      <h4>Carbon Emissions</h4>
                      <div class="metric-value">245,000 tCO2e</div>
                      <div class="metric-trend decreasing">
                        <i class="fas fa-arrow-down"></i> 12% vs previous year
                      </div>
                    </div>
                  </div>

                  <div class="metric-card">
                    <div class="metric-icon">
                      <i class="fas fa-tint"></i>
                    </div>
                    <div class="metric-details">
                      <h4>Water Usage</h4>
                      <div class="metric-value">1.8M cubic meters</div>
                      <div class="metric-trend decreasing">
                        <i class="fas fa-arrow-down"></i> 5% vs previous year
                      </div>
                    </div>
                  </div>

                  <div class="metric-card">
                    <div class="metric-icon">
                      <i class="fas fa-recycle"></i>
                    </div>
                    <div class="metric-details">
                      <h4>Waste Recycled</h4>
                      <div class="metric-value">78%</div>
                      <div class="metric-trend increasing">
                        <i class="fas fa-arrow-up"></i> 8% vs previous year
                      </div>
                    </div>
                  </div>

                  <div class="metric-card">
                    <div class="metric-icon">
                      <i class="fas fa-bolt"></i>
                    </div>
                    <div class="metric-details">
                      <h4>Renewable Energy</h4>
                      <div class="metric-value">42%</div>
                      <div class="metric-trend increasing">
                        <i class="fas fa-arrow-up"></i> 15% vs previous year
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="improvement-opportunities">
                <h3>Improvement Opportunities</h3>
                <div class="opportunities-list">
                  <div class="opportunity-item">
                    <div class="opportunity-icon">
                      <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="opportunity-details">
                      <h4>Biodiversity Impact Metrics</h4>
                      <p>The document lacks comprehensive biodiversity impact metrics as required by ESRS E4. Consider adding quantitative assessments of land use change and habitat impact.</p>
                    </div>
                  </div>

                  <div class="opportunity-item">
                    <div class="opportunity-icon">
                      <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="opportunity-details">
                      <h4>Supply Chain Due Diligence</h4>
                      <p>Supply chain human rights due diligence reporting is limited. Expand on supplier assessment methodology and results to meet CSRD Article 4 requirements.</p>
                    </div>
                  </div>

                  <div class="opportunity-item">
                    <div class="opportunity-icon">
                      <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="opportunity-details">
                      <h4>Climate Transition Plan</h4>
                      <p>The climate transition plan lacks specific interim targets. Consider adding clear milestones for 2025 and 2030 to strengthen TCFD compliance.</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Sidebar with framework assessment -->
            <div class="insights-sidebar">
              <div class="sidebar-section">
                <h3>Framework Assessment</h3>
                
                <div class="assessment-tabs">
                  <div class="assessment-tab active" data-assessment="csrd">CSRD</div>
                  <div class="assessment-tab" data-assessment="esrs">ESRS</div>
                  <div class="assessment-tab" data-assessment="tcfd">TCFD</div>
                  <div class="assessment-tab" data-assessment="sfdr">SFDR</div>
                  <div class="assessment-tab" data-assessment="sasb">SASB</div>
                </div>

                <div class="assessment-content active" id="csrd-assessment">
                  <div class="assessment-category">
                    <div class="category-header">
                      <h4>Environmental Reporting</h4>
                      <span class="category-score green">Strong</span>
                    </div>
                    <ul class="category-details">
                      <li class="compliant">
                        <i class="fas fa-check-circle"></i>
                        <span>Climate change mitigation measures</span>
                      </li>
                      <li class="compliant">
                        <i class="fas fa-check-circle"></i>
                        <span>Scope 1, 2, 3 emissions data</span>
                      </li>
                      <li class="compliant">
                        <i class="fas fa-check-circle"></i>
                        <span>Resource use optimization</span>
                      </li>
                      <li class="non-compliant">
                        <i class="fas fa-times-circle"></i>
                        <span>Biodiversity impact assessment</span>
                      </li>
                    </ul>
                  </div>

                  <div class="assessment-category">
                    <div class="category-header">
                      <h4>Social Reporting</h4>
                      <span class="category-score amber">Moderate</span>
                    </div>
                    <ul class="category-details">
                      <li class="compliant">
                        <i class="fas fa-check-circle"></i>
                        <span>Equal opportunities policies</span>
                      </li>
                      <li class="compliant">
                        <i class="fas fa-check-circle"></i>
                        <span>Working conditions</span>
                      </li>
                      <li class="non-compliant">
                        <i class="fas fa-times-circle"></i>
                        <span>Human rights due diligence</span>
                      </li>
                      <li class="non-compliant">
                        <i class="fas fa-times-circle"></i>
                        <span>Community engagement metrics</span>
                      </li>
                    </ul>
                  </div>

                  <div class="assessment-category">
                    <div class="category-header">
                      <h4>Governance Reporting</h4>
                      <span class="category-score green">Strong</span>
                    </div>
                    <ul class="category-details">
                      <li class="compliant">
                        <i class="fas fa-check-circle"></i>
                        <span>Board diversity & composition</span>
                      </li>
                      <li class="compliant">
                        <i class="fas fa-check-circle"></i>
                        <span>Business ethics framework</span>
                      </li>
                      <li class="compliant">
                        <i class="fas fa-check-circle"></i>
                        <span>Anti-corruption measures</span>
                      </li>
                      <li class="compliant">
                        <i class="fas fa-check-circle"></i>
                        <span>Sustainability governance</span>
                      </li>
                    </ul>
                  </div>
                </div>

                <div class="assessment-content" id="esrs-assessment">
                  <!-- ESRS assessment content -->
                  <p class="placeholder-text">ESRS assessment details will be shown here</p>
                </div>

                <div class="assessment-content" id="tcfd-assessment">
                  <!-- TCFD assessment content -->
                  <p class="placeholder-text">TCFD assessment details will be shown here</p>
                </div>

                <div class="assessment-content" id="sfdr-assessment">
                  <!-- SFDR assessment content -->
                  <p class="placeholder-text">SFDR assessment details will be shown here</p>
                </div>

                <div class="assessment-content" id="sasb-assessment">
                  <!-- SASB assessment content -->
                  <p class="placeholder-text">SASB assessment details will be shown here</p>
                </div>
              </div>

              <div class="sidebar-section">
                <h3>Document Details</h3>
                <div class="document-details">
                  <div class="detail-item">
                    <div class="detail-label">File Name:</div>
                    <div class="detail-value" id="insight-filename">sustainability_report_2025.pdf</div>
                  </div>
                  <div class="detail-item">
                    <div class="detail-label">Document Type:</div>
                    <div class="detail-value">Sustainability Report</div>
                  </div>
                  <div class="detail-item">
                    <div class="detail-label">Uploaded:</div>
                    <div class="detail-value" id="insight-upload-date">March 28, 2025</div>
                  </div>
                  <div class="detail-item">
                    <div class="detail-label">Pages:</div>
                    <div class="detail-value" id="insight-page-count">86</div>
                  </div>
                  <div class="detail-item">
                    <div class="detail-label">Word Count:</div>
                    <div class="detail-value" id="insight-word-count">32,450</div>
                  </div>
                </div>
              </div>

              <div class="sidebar-section">
                <h3>Actions</h3>
                <div class="action-buttons">
                  <button class="action-button" id="download-report">
                    <i class="fas fa-download"></i> Download Report
                  </button>
                  <button class="action-button" id="export-insights">
                    <i class="fas fa-file-export"></i> Export Insights
                  </button>
                  <button class="action-button" id="query-document">
                    <i class="fas fa-search"></i> Query Document
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Right Sidebar / Insights Panel -->
  <div class="finchat-insights">
    <!-- Regulatory Timeline Section -->
    <div class="insights-section">
      <div class="insights-section-header">
        <h3 class="insights-section-title"><i class="fas fa-calendar-alt"></i> Regulatory Timeline</h3>
        <p class="insights-section-description">Stay informed about upcoming regulatory deadlines</p>
      </div>
      <div class="timeline-container-right">
        <div class="timeline-event-right high-impact">
          <div class="timeline-date-right">Apr 30, 2025</div>
          <h6>CSRD First Reporting Deadline</h6>
          <p>Large companies must submit their first CSRD-compliant sustainability reports for the 2024 financial year.</p>
        </div>
        <div class="timeline-event-right medium-impact">
          <div class="timeline-date-right">Jun 15, 2025</div>
          <h6>SASB Standards Update</h6>
          <p>The Value Reporting Foundation is releasing updated industry-specific SASB standards with expanded climate metrics.</p>
        </div>
        <div class="timeline-event-right low-impact">
          <div class="timeline-date-right">Oct 10, 2025</div>
          <h6>TCFD Guidance Revision</h6>
          <p>Updated guidance on climate scenario analysis methodologies and enhanced transition risk disclosures.</p>
        </div>
      </div>
    </div>
    
    <!-- Document Statistics Section -->
    <div class="insights-section">
      <div class="insights-section-header">
        <h3 class="insights-section-title"><i class="fas fa-chart-pie"></i> Document Statistics</h3>
        <p class="insights-section-description">Key metrics about your document</p>
      </div>
      <div class="insights-stats">
        <div class="insights-stat-item">
          <div class="stat-label">Page Count</div>
          <div class="stat-value" id="insight-page-count">45</div>
        </div>
        <div class="insights-stat-item">
          <div class="stat-label">Word Count</div>
          <div class="stat-value" id="insight-word-count">32,450</div>
        </div>
        <div class="insights-stat-item">
          <div class="stat-label">Frameworks Referenced</div>
          <div class="stat-value" id="insight-frameworks">5</div>
        </div>
        <div class="insights-stat-item">
          <div class="stat-label">Last Updated</div>
          <div class="stat-value" id="insight-last-updated">March 25, 2025</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Text Paste Modal -->
<div class="modal" id="text-paste-modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Paste Document Text</h3>
      <button class="close-modal" id="close-text-modal">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="modal-body">
      <p class="modal-description">Paste text from your sustainability report below:</p>
      <textarea id="pasted-text" placeholder="Paste your document text here..."></textarea>
      <div class="text-details">
        <div class="word-count">Word count: <span id="word-count">0</span></div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="cancel-btn" id="cancel-text-paste">Cancel</button>
      <button class="submit-btn" id="submit-text-paste">Upload Text</button>
    </div>
  </div>
</div>

<!-- Sidebar toggle and UI interactions -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Toggle sidebar
        const toggleSidebarBtn = document.getElementById('toggleSidebar');
        toggleSidebarBtn.addEventListener('click', function() {
            document.body.classList.toggle('sidebar-collapsed');
            
            // Update button icon
            const icon = toggleSidebarBtn.querySelector('i');
            if (document.body.classList.contains('sidebar-collapsed')) {
                icon.classList.remove('fa-chevron-left');
                icon.classList.add('fa-chevron-right');
            } else {
                icon.classList.remove('fa-chevron-right');
                icon.classList.add('fa-chevron-left');
            }
        });
        
        // Toggle insights panel
        const toggleInsightsBtn = document.getElementById('toggleInsights');
        const documentContent = document.querySelector('.document-hub-content');
        toggleInsightsBtn.addEventListener('click', function() {
            document.body.classList.toggle('insights-open');
            documentContent.classList.toggle('insights-open');
            toggleInsightsBtn.classList.toggle('active');
        });
    });
</script>

<script src="{{ url_for('static', filename='js/document-hub-redesign.js') }}"></script>
</body>
</html>