<!-- Sidebar Navigation -->
<div class="sidebar">
    <!-- Logo and Brand -->
    <div class="sidebar-header">
        <a href="/" class="sidebar-brand">
            <span class="brand-icon"><i class="fas fa-leaf"></i></span>
            <span class="brand-text">SustainaTrendâ„¢</span>
        </a>
        <button class="sidebar-toggle" id="sidebarToggle">
            <i class="fas fa-bars"></i>
        </button>
    </div>

    <!-- Navigation Sections -->
    <div class="sidebar-content">
        {% for section in nav_sections %}
        <div class="nav-section">
            <h5 class="nav-section-title">{{ section.title }}</h5>
            <ul class="nav-items">
                {% if section.items is defined and section.items is iterable and section.items is not string %}
                    {% for item in section.items %}
                    <li class="nav-item {% if active_nav == item.id %}active{% endif %}">
                        <a href="{{ item.url }}" class="nav-link">
                            <i class="nav-icon fas {{ item.icon }}"></i>
                            <span class="nav-text">{{ item.title }}</span>
                        </a>
                    </li>
                    {% endfor %}
                {% else %}
                    <li class="nav-item">
                        <span class="nav-link">No menu items available</span>
                    </li>
                {% endif %}
            </ul>
        </div>
        {% endfor %}
    </div>

    <!-- User Menu (Bottom) -->
    <div class="sidebar-footer">
        <div class="user-menu">
            {% for item in user_menu %}
            <a href="{{ item.url }}" class="user-menu-item">
                <i class="fas {{ item.icon }}"></i>
                <span>{{ item.title }}</span>
            </a>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Sidebar Overlay (for mobile) -->
<div class="sidebar-overlay" id="sidebarOverlay"></div>

<!-- Sidebar Toggle JavaScript -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const toggle = document.getElementById('sidebarToggle');
        const sidebar = document.querySelector('.sidebar');
        const overlay = document.getElementById('sidebarOverlay');
        
        function toggleSidebar() {
            sidebar.classList.toggle('collapsed');
            document.body.classList.toggle('sidebar-collapsed');
            
            if (window.innerWidth < 992) {
                overlay.classList.toggle('active');
            }
        }
        
        // Toggle sidebar when button is clicked
        toggle.addEventListener('click', toggleSidebar);
        
        // Close sidebar when overlay is clicked (mobile)
        overlay.addEventListener('click', function() {
            sidebar.classList.remove('collapsed');
            document.body.classList.remove('sidebar-collapsed');
            overlay.classList.remove('active');
        });
        
        // Adjust sidebar state on window resize
        window.addEventListener('resize', function() {
            if (window.innerWidth < 992) {
                sidebar.classList.remove('collapsed');
                document.body.classList.remove('sidebar-collapsed');
                overlay.classList.remove('active');
            }
        });
    });
</script>