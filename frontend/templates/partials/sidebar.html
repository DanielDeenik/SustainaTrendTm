<nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar-theme sidebar collapse">
  <div class="position-sticky pt-3 sidebar-sticky">
    <!-- Brand logo in sidebar -->
    <div class="sidebar-brand d-flex align-items-center justify-content-center mb-4">
      <img src="{{ url_for('static', filename='img/logo-icon.svg') }}" alt="SustainaTrend™" height="36" class="me-2">
      <span class="sidebar-brand-text">SustainaTrend™</span>
    </div>
    
    <div class="px-3 mb-3">
      <div class="sidebar-search position-relative">
        <input type="text" class="form-control rounded-pill" placeholder="Quick search...">
        <i class="bi bi-search position-absolute top-50 end-0 translate-middle-y me-3"></i>
      </div>
    </div>
    
    <div class="sidebar-section">
      <div class="sidebar-section-header">
        <span>Core Platform</span>
      </div>
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="sidebar-link {{ 'active' if active_page == 'home' else '' }}" href="/">
            <i class="bi bi-house"></i>
            <span>Home</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="sidebar-link {{ 'active' if active_page == 'dashboard' else '' }}" href="/dashboard">
            <i class="bi bi-speedometer2"></i>
            <span>Dashboard</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="sidebar-link {{ 'active' if active_page == 'trend-analysis' else '' }}" href="/trend-analysis">
            <i class="bi bi-graph-up"></i>
            <span>Trend Analysis</span>
            <span class="sidebar-badge-success">New</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="sidebar-link {{ 'active' if active_page == 'search' else '' }}" href="/search">
            <i class="bi bi-search"></i>
            <span>AI Search</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="sidebar-link {{ 'active' if active_page == 'document-upload' else '' }}" href="/document-upload">
            <i class="bi bi-file-earmark-text"></i>
            <span>Document Analysis</span>
          </a>
        </li>
      </ul>
    </div>

    <div class="sidebar-section">
      <div class="sidebar-section-header">
        <span>Sustainability Intelligence</span>
      </div>
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="sidebar-link {{ 'active' if active_page == 'realestate-unified-dashboard' else '' }}" href="/realestate-unified-dashboard">
            <i class="bi bi-building"></i>
            <span>Real Estate Dashboard</span>
            <span class="sidebar-badge-success">New</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="sidebar-link {{ 'active' if active_page == 'realestate-trends' else '' }}" href="/realestate-trends">
            <i class="bi bi-graph-up"></i>
            <span>Real Estate Trends</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="sidebar-link {{ 'active' if active_page == 'strategy-simulation' else '' }}" href="/strategy-simulation/">
            <i class="bi bi-kanban"></i>
            <span>Strategy Simulation</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="sidebar-link {{ 'active' if active_page == 'company-search' else '' }}" href="/company-search">
            <i class="bi bi-building-check"></i>
            <span>Company Research</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="sidebar-link {{ 'active' if active_page == 'esrs-framework' else '' }}" href="/esrs-framework">
            <i class="bi bi-clipboard-check"></i>
            <span>ESRS Framework</span>
          </a>
        </li>
      </ul>
    </div>

    <div class="sidebar-section">
      <div class="sidebar-section-header">
        <span>Advanced Analytics</span>
      </div>
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="sidebar-link {{ 'active' if active_page == 'sentiment-analysis' else '' }}" href="/sentiment-analysis">
            <i class="bi bi-emoji-smile"></i>
            <span>Sentiment Analysis</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="sidebar-link {{ 'active' if active_page == 'trend-virality-dashboard' else '' }}" href="/trend-virality-dashboard">
            <i class="bi bi-lightning"></i>
            <span>Trend Virality</span>
            <span class="sidebar-badge-primary">Beta</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="sidebar-link {{ 'active' if active_page == 'sustainability-storytelling' else '' }}" href="/sustainability-storytelling">
            <i class="bi bi-book"></i>
            <span>AI Storytelling</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="sidebar-link {{ 'active' if active_page == 'ethical-ai' else '' }}" href="/ethical-ai">
            <i class="bi bi-shield-check"></i>
            <span>Ethical AI</span>
          </a>
        </li>
      </ul>
    </div>
    
    <!-- Sidebar footer with version and status -->
    <div class="sidebar-footer">
      <div class="d-flex align-items-center justify-content-between">
        <div class="small">
          <i class="bi bi-circle-fill text-success me-1" style="font-size: 8px;"></i>
          <span class="text-muted">v2.1.0</span>
        </div>
        <a href="/api-status" class="sidebar-footer-link" title="System Status">
          <i class="bi bi-info-circle"></i>
        </a>
      </div>
    </div>
  </div>
</nav>

<style>
.sidebar-theme {
  background-color: var(--card-bg);
  border-right: 1px solid var(--border-color);
  transition: background-color 0.3s ease, border-color 0.3s ease;
  overflow-y: auto;
  z-index: 100;
}

.sidebar-brand {
  padding: 0.75rem 1rem;
}

.sidebar-brand-text {
  font-weight: 700;
  font-size: 1.2rem;
  color: var(--primary-color);
}

.sidebar-search input {
  background-color: rgba(var(--bs-primary-rgb), 0.05);
  border-color: rgba(var(--bs-primary-rgb), 0.1);
  font-size: 0.875rem;
  padding-right: 2.5rem;
  color: var(--text-color);
}

.sidebar-search input:focus {
  box-shadow: 0 0 0 0.2rem rgba(var(--bs-primary-rgb), 0.1);
  border-color: rgba(var(--bs-primary-rgb), 0.2);
  background-color: var(--card-bg);
}

.sidebar-search i {
  color: rgba(var(--bs-primary-rgb), 0.7);
  pointer-events: none;
}

.sidebar-section {
  margin-bottom: 1.5rem;
}

.sidebar-section-header {
  text-transform: uppercase;
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--text-muted);
  padding: 0 1.25rem;
  margin-bottom: 0.5rem;
}

.sidebar-link {
  display: flex;
  align-items: center;
  padding: 0.625rem 1.25rem;
  color: var(--text-color);
  text-decoration: none;
  border-radius: 0.375rem;
  margin: 0.125rem 0.75rem;
  transition: all 0.2s ease;
  font-size: 0.9375rem;
  position: relative;
}

.sidebar-link i {
  margin-right: 0.875rem;
  font-size: 1.125rem;
  color: var(--text-muted);
  width: 1.25rem;
  display: flex;
  justify-content: center;
  transition: color 0.2s ease;
}

.sidebar-link:hover {
  background-color: rgba(var(--bs-primary-rgb), 0.08);
  color: var(--primary-color);
}

.sidebar-link:hover i {
  color: var(--primary-color);
}

.sidebar-link.active {
  background-color: rgba(var(--bs-primary-rgb), 0.1);
  color: var(--primary-color);
  font-weight: 500;
}

.sidebar-link.active i {
  color: var(--primary-color);
}

.sidebar-link.active::before {
  content: '';
  position: absolute;
  left: -0.75rem;
  top: 50%;
  height: 50%;
  width: 3px;
  background-color: var(--primary-color);
  transform: translateY(-50%);
  border-radius: 0 3px 3px 0;
}

.sidebar-badge-success,
.sidebar-badge-primary {
  font-size: 0.625rem;
  padding: 0.125rem 0.375rem;
  border-radius: 0.25rem;
  margin-left: auto;
  font-weight: 600;
}

.sidebar-badge-success {
  background-color: rgba(var(--bs-success-rgb), 0.1);
  color: var(--success-color);
}

.sidebar-badge-primary {
  background-color: rgba(var(--bs-primary-rgb), 0.1);
  color: var(--primary-color);
}

.sidebar-footer {
  padding: 0.75rem 1.25rem;
  margin-top: 2rem;
  border-top: 1px solid var(--border-color);
}

.sidebar-footer-link {
  color: var(--text-muted);
  transition: color 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 1.5rem;
  height: 1.5rem;
  border-radius: 50%;
}

.sidebar-footer-link:hover {
  color: var(--primary-color);
}

@media (max-width: 767.98px) {
  .sidebar-theme {
    position: fixed;
    top: 0;
    bottom: 0;
    left: 0;
    width: 280px;
    max-width: 100%;
    z-index: 1100;
    transform: translateX(-100%);
    transition: transform 0.3s ease;
  }
  
  .sidebar-theme.show {
    transform: translateX(0);
    box-shadow: 5px 0 15px rgba(0, 0, 0, 0.1);
  }
}
</style>